import{f as Xi}from"./index.916b47e5.js";import{_ as Yi,o as Wi,c as Gi,p as Zi,i as Ji,f as Qt}from"./index.14062165.js";import"./_commonjsHelpers.712cc82f.js";var Ki={value:()=>{}};function ri(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Pt(r)}function Pt(t){this._=t}function Qi(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Pt.prototype=ri.prototype={constructor:Pt,on:function(t,e){var r=this._,i=Qi(t+"",r),n,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((n=(t=i[s]).type)&&(n=tr(r[n],t.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=Be(r[n],t.name,e);else if(e==null)for(n in r)r[n]=Be(r[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Pt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,s;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,n=s.length;i<n;++i)s[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,s=i.length;n<s;++n)i[n].value.apply(e,r)}};function tr(t,e){for(var r=0,i=t.length,n;r<i;++r)if((n=t[r]).name===e)return n.value}function Be(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=Ki,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var ne="http://www.w3.org/1999/xhtml";const $e={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),$e.hasOwnProperty(e)?{space:$e[e],local:t}:t}function er(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===ne&&e.documentElement.namespaceURI===ne?e.createElement(t):e.createElementNS(r,t)}}function ir(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ni(t){var e=Zt(t);return(e.local?ir:er)(e)}function rr(){}function ge(t){return t==null?rr:function(){return this.querySelector(t)}}function nr(t){typeof t!="function"&&(t=ge(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=new Array(o),h,l,u=0;u<o;++u)(h=s[u])&&(l=t.call(h,h.__data__,u,s))&&("__data__"in h&&(l.__data__=h.__data__),a[u]=l);return new q(i,this._parents)}function sr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function or(){return[]}function si(t){return t==null?or:function(){return this.querySelectorAll(t)}}function ar(t){return function(){return sr(t.apply(this,arguments))}}function lr(t){typeof t=="function"?t=ar(t):t=si(t);for(var e=this._groups,r=e.length,i=[],n=[],s=0;s<r;++s)for(var o=e[s],a=o.length,h,l=0;l<a;++l)(h=o[l])&&(i.push(t.call(h,h.__data__,l,o)),n.push(h));return new q(i,n)}function oi(t){return function(){return this.matches(t)}}function ai(t){return function(e){return e.matches(t)}}var hr=Array.prototype.find;function ur(t){return function(){return hr.call(this.children,t)}}function fr(){return this.firstElementChild}function cr(t){return this.select(t==null?fr:ur(typeof t=="function"?t:ai(t)))}var dr=Array.prototype.filter;function pr(){return Array.from(this.children)}function vr(t){return function(){return dr.call(this.children,t)}}function yr(t){return this.selectAll(t==null?pr:vr(typeof t=="function"?t:ai(t)))}function _r(t){typeof t!="function"&&(t=oi(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=[],h,l=0;l<o;++l)(h=s[l])&&t.call(h,h.__data__,l,s)&&a.push(h);return new q(i,this._parents)}function li(t){return new Array(t.length)}function gr(){return new q(this._enter||this._groups.map(li),this._parents)}function Ht(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ht.prototype={constructor:Ht,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function mr(t){return function(){return t}}function xr(t,e,r,i,n,s){for(var o=0,a,h=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):r[o]=new Ht(t,s[o]);for(;o<h;++o)(a=e[o])&&(n[o]=a)}function wr(t,e,r,i,n,s,o){var a,h,l=new Map,u=e.length,f=s.length,c=new Array(u),d;for(a=0;a<u;++a)(h=e[a])&&(c[a]=d=o.call(h,h.__data__,a,e)+"",l.has(d)?n[a]=h:l.set(d,h));for(a=0;a<f;++a)d=o.call(t,s[a],a,s)+"",(h=l.get(d))?(i[a]=h,h.__data__=s[a],l.delete(d)):r[a]=new Ht(t,s[a]);for(a=0;a<u;++a)(h=e[a])&&l.get(c[a])===h&&(n[a]=h)}function br(t){return t.__data__}function Ir(t,e){if(!arguments.length)return Array.from(this,br);var r=e?wr:xr,i=this._parents,n=this._groups;typeof t!="function"&&(t=mr(t));for(var s=n.length,o=new Array(s),a=new Array(s),h=new Array(s),l=0;l<s;++l){var u=i[l],f=n[l],c=f.length,d=Mr(t.call(u,u&&u.__data__,l,i)),y=d.length,v=a[l]=new Array(y),b=o[l]=new Array(y),x=h[l]=new Array(c);r(u,f,v,b,x,d,e);for(var m=0,g=0,w,I;m<y;++m)if(w=v[m]){for(m>=g&&(g=m+1);!(I=b[g])&&++g<y;);w._next=I||null}}return o=new q(o,i),o._enter=a,o._exit=h,o}function Mr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Cr(){return new q(this._exit||this._groups.map(li),this._parents)}function kr(t,e,r){var i=this.enter(),n=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(n=e(n),n&&(n=n.selection())),r==null?s.remove():r(s),i&&n?i.merge(n).order():n}function Er(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,n=r.length,s=i.length,o=Math.min(n,s),a=new Array(n),h=0;h<o;++h)for(var l=r[h],u=i[h],f=l.length,c=a[h]=new Array(f),d,y=0;y<f;++y)(d=l[y]||u[y])&&(c[y]=d);for(;h<n;++h)a[h]=r[h];return new q(a,this._parents)}function Or(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],n=i.length-1,s=i[n],o;--n>=0;)(o=i[n])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Br(t){t||(t=$r);function e(f,c){return f&&c?t(f.__data__,c.__data__):!f-!c}for(var r=this._groups,i=r.length,n=new Array(i),s=0;s<i;++s){for(var o=r[s],a=o.length,h=n[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(h[u]=l);h.sort(e)}return new q(n,this._parents).order()}function $r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Sr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Nr(){return Array.from(this)}function Vr(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length;n<s;++n){var o=i[n];if(o)return o}return null}function Ar(){let t=0;for(const e of this)++t;return t}function zr(){return!this.node()}function Rr(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n=e[r],s=0,o=n.length,a;s<o;++s)(a=n[s])&&t.call(a,a.__data__,s,n);return this}function Tr(t){return function(){this.removeAttribute(t)}}function Pr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jr(t,e){return function(){this.setAttribute(t,e)}}function Fr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Dr(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function qr(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Lr(t,e){var r=Zt(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?Pr:Tr:typeof e=="function"?r.local?qr:Dr:r.local?Fr:jr)(r,e))}function hi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Hr(t){return function(){this.style.removeProperty(t)}}function Ur(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Xr(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function Yr(t,e,r){return arguments.length>1?this.each((e==null?Hr:typeof e=="function"?Xr:Ur)(t,e,r==null?"":r)):gt(this.node(),t)}function gt(t,e){return t.style.getPropertyValue(e)||hi(t).getComputedStyle(t,null).getPropertyValue(e)}function Wr(t){return function(){delete this[t]}}function Gr(t,e){return function(){this[t]=e}}function Zr(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Jr(t,e){return arguments.length>1?this.each((e==null?Wr:typeof e=="function"?Zr:Gr)(t,e)):this.node()[t]}function ui(t){return t.trim().split(/^|\s+/)}function me(t){return t.classList||new fi(t)}function fi(t){this._node=t,this._names=ui(t.getAttribute("class")||"")}fi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ci(t,e){for(var r=me(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function di(t,e){for(var r=me(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function Kr(t){return function(){ci(this,t)}}function Qr(t){return function(){di(this,t)}}function tn(t,e){return function(){(e.apply(this,arguments)?ci:di)(this,t)}}function en(t,e){var r=ui(t+"");if(arguments.length<2){for(var i=me(this.node()),n=-1,s=r.length;++n<s;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof e=="function"?tn:e?Kr:Qr)(r,e))}function rn(){this.textContent=""}function nn(t){return function(){this.textContent=t}}function sn(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function on(t){return arguments.length?this.each(t==null?rn:(typeof t=="function"?sn:nn)(t)):this.node().textContent}function an(){this.innerHTML=""}function ln(t){return function(){this.innerHTML=t}}function hn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function un(t){return arguments.length?this.each(t==null?an:(typeof t=="function"?hn:ln)(t)):this.node().innerHTML}function fn(){this.nextSibling&&this.parentNode.appendChild(this)}function cn(){return this.each(fn)}function dn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pn(){return this.each(dn)}function vn(t){var e=typeof t=="function"?t:ni(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function yn(){return null}function _n(t,e){var r=typeof t=="function"?t:ni(t),i=e==null?yn:typeof e=="function"?e:ge(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function gn(){var t=this.parentNode;t&&t.removeChild(this)}function mn(){return this.each(gn)}function xn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bn(t){return this.select(t?wn:xn)}function In(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Mn(t){return function(e){t.call(this,e,this.__data__)}}function Cn(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function kn(t){return function(){var e=this.__on;if(!!e){for(var r=0,i=-1,n=e.length,s;r<n;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function En(t,e,r){return function(){var i=this.__on,n,s=Mn(e);if(i){for(var o=0,a=i.length;o<a;++o)if((n=i[o]).type===t.type&&n.name===t.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=r),n.value=e;return}}this.addEventListener(t.type,s,r),n={type:t.type,name:t.name,value:e,listener:s,options:r},i?i.push(n):this.__on=[n]}}function On(t,e,r){var i=Cn(t+""),n,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var h=0,l=a.length,u;h<l;++h)for(n=0,u=a[h];n<s;++n)if((o=i[n]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?En:kn,n=0;n<s;++n)this.each(a(i[n],e,r));return this}function pi(t,e,r){var i=hi(t),n=i.CustomEvent;typeof n=="function"?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function Bn(t,e){return function(){return pi(this,t,e)}}function $n(t,e){return function(){return pi(this,t,e.apply(this,arguments))}}function Sn(t,e){return this.each((typeof e=="function"?$n:Bn)(t,e))}function*Nn(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length,o;n<s;++n)(o=i[n])&&(yield o)}var vi=[null];function q(t,e){this._groups=t,this._parents=e}function $t(){return new q([[document.documentElement]],vi)}function Vn(){return this}q.prototype=$t.prototype={constructor:q,select:nr,selectAll:lr,selectChild:cr,selectChildren:yr,filter:_r,data:Ir,enter:gr,exit:Cr,join:kr,merge:Er,selection:Vn,order:Or,sort:Br,call:Sr,nodes:Nr,node:Vr,size:Ar,empty:zr,each:Rr,attr:Lr,style:Yr,property:Jr,classed:en,text:on,html:un,raise:cn,lower:pn,append:vn,insert:_n,remove:mn,clone:bn,datum:In,on:On,dispatch:Sn,[Symbol.iterator]:Nn};function An(t){return typeof t=="string"?new q([[document.querySelector(t)]],[document.documentElement]):new q([[t]],vi)}function xe(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function yi(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function St(){}var kt=.7,Ut=1/kt,_t="\\s*([+-]?\\d+)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zn=/^#([0-9a-f]{3,8})$/,Rn=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),Tn=new RegExp(`^rgb\\(${Z},${Z},${Z}\\)$`),Pn=new RegExp(`^rgba\\(${_t},${_t},${_t},${Et}\\)$`),jn=new RegExp(`^rgba\\(${Z},${Z},${Z},${Et}\\)$`),Fn=new RegExp(`^hsl\\(${Et},${Z},${Z}\\)$`),Dn=new RegExp(`^hsla\\(${Et},${Z},${Z},${Et}\\)$`),Se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xe(St,Ot,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ne,formatHex:Ne,formatHex8:qn,formatHsl:Ln,formatRgb:Ve,toString:Ve});function Ne(){return this.rgb().formatHex()}function qn(){return this.rgb().formatHex8()}function Ln(){return _i(this).formatHsl()}function Ve(){return this.rgb().formatRgb()}function Ot(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=zn.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Ae(e):r===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?At(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?At(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Rn.exec(t))?new D(e[1],e[2],e[3],1):(e=Tn.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Pn.exec(t))?At(e[1],e[2],e[3],e[4]):(e=jn.exec(t))?At(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fn.exec(t))?Te(e[1],e[2]/100,e[3]/100,1):(e=Dn.exec(t))?Te(e[1],e[2]/100,e[3]/100,e[4]):Se.hasOwnProperty(t)?Ae(Se[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function Ae(t){return new D(t>>16&255,t>>8&255,t&255,1)}function At(t,e,r,i){return i<=0&&(t=e=r=NaN),new D(t,e,r,i)}function Hn(t){return t instanceof St||(t=Ot(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function se(t,e,r,i){return arguments.length===1?Hn(t):new D(t,e,r,i==null?1:i)}function D(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}xe(D,se,yi(St,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?kt:Math.pow(kt,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new D(ft(this.r),ft(this.g),ft(this.b),Xt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ze,formatHex:ze,formatHex8:Un,formatRgb:Re,toString:Re}));function ze(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}`}function Un(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}${ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function Re(){const t=Xt(this.opacity);return`${t===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${t===1?")":`, ${t})`}`}function Xt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ft(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ut(t){return t=ft(t),(t<16?"0":"")+t.toString(16)}function Te(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Y(t,e,r,i)}function _i(t){if(t instanceof Y)return new Y(t.h,t.s,t.l,t.opacity);if(t instanceof St||(t=Ot(t)),!t)return new Y;if(t instanceof Y)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),s=Math.max(e,r,i),o=NaN,a=s-n,h=(s+n)/2;return a?(e===s?o=(r-i)/a+(r<i)*6:r===s?o=(i-e)/a+2:o=(e-r)/a+4,a/=h<.5?s+n:2-s-n,o*=60):a=h>0&&h<1?0:o,new Y(o,a,h,t.opacity)}function Xn(t,e,r,i){return arguments.length===1?_i(t):new Y(t,e,r,i==null?1:i)}function Y(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}xe(Y,Xn,yi(St,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new Y(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?kt:Math.pow(kt,t),new Y(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,n=2*r-i;return new D(te(t>=240?t-240:t+120,n,i),te(t,n,i),te(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new Y(Pe(this.h),zt(this.s),zt(this.l),Xt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xt(this.opacity);return`${t===1?"hsl(":"hsla("}${Pe(this.h)}, ${zt(this.s)*100}%, ${zt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pe(t){return t=(t||0)%360,t<0?t+360:t}function zt(t){return Math.max(0,Math.min(1,t||0))}function te(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const gi=t=>()=>t;function Yn(t,e){return function(r){return t+r*e}}function Wn(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function Gn(t){return(t=+t)==1?mi:function(e,r){return r-e?Wn(e,r,t):gi(isNaN(e)?r:e)}}function mi(t,e){var r=e-t;return r?Yn(t,r):gi(isNaN(t)?e:t)}const je=function t(e){var r=Gn(e);function i(n,s){var o=r((n=se(n)).r,(s=se(s)).r),a=r(n.g,s.g),h=r(n.b,s.b),l=mi(n.opacity,s.opacity);return function(u){return n.r=o(u),n.g=a(u),n.b=h(u),n.opacity=l(u),n+""}}return i.gamma=t,i}(1);function nt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ee=new RegExp(oe.source,"g");function Zn(t){return function(){return t}}function Jn(t){return function(e){return t(e)+""}}function Kn(t,e){var r=oe.lastIndex=ee.lastIndex=0,i,n,s,o=-1,a=[],h=[];for(t=t+"",e=e+"";(i=oe.exec(t))&&(n=ee.exec(e));)(s=n.index)>r&&(s=e.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,h.push({i:o,x:nt(i,n)})),r=ee.lastIndex;return r<e.length&&(s=e.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?h[0]?Jn(h[0].x):Zn(e):(e=h.length,function(l){for(var u=0,f;u<e;++u)a[(f=h[u]).i]=f.x(l);return a.join("")})}var Fe=180/Math.PI,ae={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xi(t,e,r,i,n,s){var o,a,h;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(h=t*r+e*i)&&(r-=t*h,i-=e*h),(a=Math.sqrt(r*r+i*i))&&(r/=a,i/=a,h/=a),t*i<e*r&&(t=-t,e=-e,h=-h,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Fe,skewX:Math.atan(h)*Fe,scaleX:o,scaleY:a}}var Rt;function Qn(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ae:xi(e.a,e.b,e.c,e.d,e.e,e.f)}function ts(t){return t==null||(Rt||(Rt=document.createElementNS("http://www.w3.org/2000/svg","g")),Rt.setAttribute("transform",t),!(t=Rt.transform.baseVal.consolidate()))?ae:(t=t.matrix,xi(t.a,t.b,t.c,t.d,t.e,t.f))}function wi(t,e,r,i){function n(l){return l.length?l.pop()+" ":""}function s(l,u,f,c,d,y){if(l!==f||u!==c){var v=d.push("translate(",null,e,null,r);y.push({i:v-4,x:nt(l,f)},{i:v-2,x:nt(u,c)})}else(f||c)&&d.push("translate("+f+e+c+r)}function o(l,u,f,c){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),c.push({i:f.push(n(f)+"rotate(",null,i)-2,x:nt(l,u)})):u&&f.push(n(f)+"rotate("+u+i)}function a(l,u,f,c){l!==u?c.push({i:f.push(n(f)+"skewX(",null,i)-2,x:nt(l,u)}):u&&f.push(n(f)+"skewX("+u+i)}function h(l,u,f,c,d,y){if(l!==f||u!==c){var v=d.push(n(d)+"scale(",null,",",null,")");y.push({i:v-4,x:nt(l,f)},{i:v-2,x:nt(u,c)})}else(f!==1||c!==1)&&d.push(n(d)+"scale("+f+","+c+")")}return function(l,u){var f=[],c=[];return l=t(l),u=t(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,c),o(l.rotate,u.rotate,f,c),a(l.skewX,u.skewX,f,c),h(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,c),l=u=null,function(d){for(var y=-1,v=c.length,b;++y<v;)f[(b=c[y]).i]=b.x(d);return f.join("")}}}var es=wi(Qn,"px, ","px)","deg)"),is=wi(ts,", ",")",")"),mt=0,Mt=0,wt=0,bi=1e3,Yt,Ct,Wt=0,ct=0,Jt=0,Bt=typeof performance=="object"&&performance.now?performance:Date,Ii=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function we(){return ct||(Ii(rs),ct=Bt.now()+Jt)}function rs(){ct=0}function Gt(){this._call=this._time=this._next=null}Gt.prototype=Mi.prototype={constructor:Gt,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?we():+r)+(e==null?0:+e),!this._next&&Ct!==this&&(Ct?Ct._next=this:Yt=this,Ct=this),this._call=t,this._time=r,le()},stop:function(){this._call&&(this._call=null,this._time=1/0,le())}};function Mi(t,e,r){var i=new Gt;return i.restart(t,e,r),i}function ns(){we(),++mt;for(var t=Yt,e;t;)(e=ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mt}function De(){ct=(Wt=Bt.now())+Jt,mt=Mt=0;try{ns()}finally{mt=0,os(),ct=0}}function ss(){var t=Bt.now(),e=t-Wt;e>bi&&(Jt-=e,Wt=t)}function os(){for(var t,e=Yt,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Yt=r);Ct=t,le(i)}function le(t){if(!mt){Mt&&(Mt=clearTimeout(Mt));var e=t-ct;e>24?(t<1/0&&(Mt=setTimeout(De,t-Bt.now()-Jt)),wt&&(wt=clearInterval(wt))):(wt||(Wt=Bt.now(),wt=setInterval(ss,bi)),mt=1,Ii(De))}}function qe(t,e,r){var i=new Gt;return e=e==null?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,r),i}var as=ri("start","end","cancel","interrupt"),ls=[],Ci=0,Le=1,he=2,jt=3,He=4,ue=5,Ft=6;function Kt(t,e,r,i,n,s){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;hs(t,r,{name:e,index:i,group:n,on:as,tween:ls,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ci})}function be(t,e){var r=W(t,e);if(r.state>Ci)throw new Error("too late; already scheduled");return r}function K(t,e){var r=W(t,e);if(r.state>jt)throw new Error("too late; already running");return r}function W(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function hs(t,e,r){var i=t.__transition,n;i[e]=r,r.timer=Mi(s,0,r.time);function s(l){r.state=Le,r.timer.restart(o,r.delay,r.time),r.delay<=l&&o(l-r.delay)}function o(l){var u,f,c,d;if(r.state!==Le)return h();for(u in i)if(d=i[u],d.name===r.name){if(d.state===jt)return qe(o);d.state===He?(d.state=Ft,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=Ft,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(qe(function(){r.state===jt&&(r.state=He,r.timer.restart(a,r.delay,r.time),a(l))}),r.state=he,r.on.call("start",t,t.__data__,r.index,r.group),r.state===he){for(r.state=jt,n=new Array(c=r.tween.length),u=0,f=-1;u<c;++u)(d=r.tween[u].value.call(t,t.__data__,r.index,r.group))&&(n[++f]=d);n.length=f+1}}function a(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(h),r.state=ue,1),f=-1,c=n.length;++f<c;)n[f].call(t,u);r.state===ue&&(r.on.call("end",t,t.__data__,r.index,r.group),h())}function h(){r.state=Ft,r.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function us(t,e){var r=t.__transition,i,n,s=!0,o;if(!!r){e=e==null?null:e+"";for(o in r){if((i=r[o]).name!==e){s=!1;continue}n=i.state>he&&i.state<ue,i.state=Ft,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]}s&&delete t.__transition}}function fs(t){return this.each(function(){us(this,t)})}function cs(t,e){var r,i;return function(){var n=K(this,t),s=n.tween;if(s!==r){i=r=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}n.tween=i}}function ds(t,e,r){var i,n;if(typeof r!="function")throw new Error;return function(){var s=K(this,t),o=s.tween;if(o!==i){n=(i=o).slice();for(var a={name:e,value:r},h=0,l=n.length;h<l;++h)if(n[h].name===e){n[h]=a;break}h===l&&n.push(a)}s.tween=n}}function ps(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=W(this.node(),r).tween,n=0,s=i.length,o;n<s;++n)if((o=i[n]).name===t)return o.value;return null}return this.each((e==null?cs:ds)(r,t,e))}function Ie(t,e,r){var i=t._id;return t.each(function(){var n=K(this,i);(n.value||(n.value={}))[e]=r.apply(this,arguments)}),function(n){return W(n,i).value[e]}}function ki(t,e){var r;return(typeof e=="number"?nt:e instanceof Ot?je:(r=Ot(e))?(e=r,je):Kn)(t,e)}function vs(t){return function(){this.removeAttribute(t)}}function ys(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _s(t,e,r){var i,n=r+"",s;return function(){var o=this.getAttribute(t);return o===n?null:o===i?s:s=e(i=o,r)}}function gs(t,e,r){var i,n=r+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?s:s=e(i=o,r)}}function ms(t,e,r){var i,n,s;return function(){var o,a=r(this),h;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),h=a+"",o===h?null:o===i&&h===n?s:(n=h,s=e(i=o,a)))}}function xs(t,e,r){var i,n,s;return function(){var o,a=r(this),h;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),h=a+"",o===h?null:o===i&&h===n?s:(n=h,s=e(i=o,a)))}}function ws(t,e){var r=Zt(t),i=r==="transform"?is:ki;return this.attrTween(t,typeof e=="function"?(r.local?xs:ms)(r,i,Ie(this,"attr."+t,e)):e==null?(r.local?ys:vs)(r):(r.local?gs:_s)(r,i,e))}function bs(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Is(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Ms(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Is(t,s)),r}return n._value=e,n}function Cs(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&bs(t,s)),r}return n._value=e,n}function ks(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Zt(t);return this.tween(r,(i.local?Ms:Cs)(i,e))}function Es(t,e){return function(){be(this,t).delay=+e.apply(this,arguments)}}function Os(t,e){return e=+e,function(){be(this,t).delay=e}}function Bs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Es:Os)(e,t)):W(this.node(),e).delay}function $s(t,e){return function(){K(this,t).duration=+e.apply(this,arguments)}}function Ss(t,e){return e=+e,function(){K(this,t).duration=e}}function Ns(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$s:Ss)(e,t)):W(this.node(),e).duration}function Vs(t,e){if(typeof e!="function")throw new Error;return function(){K(this,t).ease=e}}function As(t){var e=this._id;return arguments.length?this.each(Vs(e,t)):W(this.node(),e).ease}function zs(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;K(this,t).ease=r}}function Rs(t){if(typeof t!="function")throw new Error;return this.each(zs(this._id,t))}function Ts(t){typeof t!="function"&&(t=oi(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=[],h,l=0;l<o;++l)(h=s[l])&&t.call(h,h.__data__,l,s)&&a.push(h);return new rt(i,this._parents,this._name,this._id)}function Ps(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,n=r.length,s=Math.min(i,n),o=new Array(i),a=0;a<s;++a)for(var h=e[a],l=r[a],u=h.length,f=o[a]=new Array(u),c,d=0;d<u;++d)(c=h[d]||l[d])&&(f[d]=c);for(;a<i;++a)o[a]=e[a];return new rt(o,this._parents,this._name,this._id)}function js(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Fs(t,e,r){var i,n,s=js(e)?be:K;return function(){var o=s(this,t),a=o.on;a!==i&&(n=(i=a).copy()).on(e,r),o.on=n}}function Ds(t,e){var r=this._id;return arguments.length<2?W(this.node(),r).on.on(t):this.each(Fs(r,t,e))}function qs(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Ls(){return this.on("end.remove",qs(this._id))}function Hs(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ge(t));for(var i=this._groups,n=i.length,s=new Array(n),o=0;o<n;++o)for(var a=i[o],h=a.length,l=s[o]=new Array(h),u,f,c=0;c<h;++c)(u=a[c])&&(f=t.call(u,u.__data__,c,a))&&("__data__"in u&&(f.__data__=u.__data__),l[c]=f,Kt(l[c],e,r,c,l,W(u,r)));return new rt(s,this._parents,e,r)}function Us(t){var e=this._name,r=this._id;typeof t!="function"&&(t=si(t));for(var i=this._groups,n=i.length,s=[],o=[],a=0;a<n;++a)for(var h=i[a],l=h.length,u,f=0;f<l;++f)if(u=h[f]){for(var c=t.call(u,u.__data__,f,h),d,y=W(u,r),v=0,b=c.length;v<b;++v)(d=c[v])&&Kt(d,e,r,v,c,y);s.push(c),o.push(u)}return new rt(s,o,e,r)}var Xs=$t.prototype.constructor;function Ys(){return new Xs(this._groups,this._parents)}function Ws(t,e){var r,i,n;return function(){var s=gt(this,t),o=(this.style.removeProperty(t),gt(this,t));return s===o?null:s===r&&o===i?n:n=e(r=s,i=o)}}function Ei(t){return function(){this.style.removeProperty(t)}}function Gs(t,e,r){var i,n=r+"",s;return function(){var o=gt(this,t);return o===n?null:o===i?s:s=e(i=o,r)}}function Zs(t,e,r){var i,n,s;return function(){var o=gt(this,t),a=r(this),h=a+"";return a==null&&(h=a=(this.style.removeProperty(t),gt(this,t))),o===h?null:o===i&&h===n?s:(n=h,s=e(i=o,a))}}function Js(t,e){var r,i,n,s="style."+e,o="end."+s,a;return function(){var h=K(this,t),l=h.on,u=h.value[s]==null?a||(a=Ei(e)):void 0;(l!==r||n!==u)&&(i=(r=l).copy()).on(o,n=u),h.on=i}}function Ks(t,e,r){var i=(t+="")=="transform"?es:ki;return e==null?this.styleTween(t,Ws(t,i)).on("end.style."+t,Ei(t)):typeof e=="function"?this.styleTween(t,Zs(t,i,Ie(this,"style."+t,e))).each(Js(this._id,t)):this.styleTween(t,Gs(t,i,e),r).on("end.style."+t,null)}function Qs(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function to(t,e,r){var i,n;function s(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&Qs(t,o,r)),i}return s._value=e,s}function eo(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,to(t,e,r==null?"":r))}function io(t){return function(){this.textContent=t}}function ro(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function no(t){return this.tween("text",typeof t=="function"?ro(Ie(this,"text",t)):io(t==null?"":t+""))}function so(t){return function(e){this.textContent=t.call(this,e)}}function oo(t){var e,r;function i(){var n=t.apply(this,arguments);return n!==r&&(e=(r=n)&&so(n)),e}return i._value=t,i}function ao(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,oo(t))}function lo(){for(var t=this._name,e=this._id,r=Oi(),i=this._groups,n=i.length,s=0;s<n;++s)for(var o=i[s],a=o.length,h,l=0;l<a;++l)if(h=o[l]){var u=W(h,e);Kt(h,t,r,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new rt(i,this._parents,t,r)}function ho(){var t,e,r=this,i=r._id,n=r.size();return new Promise(function(s,o){var a={value:o},h={value:function(){--n===0&&s()}};r.each(function(){var l=K(this,i),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),l.on=e}),n===0&&s()})}var uo=0;function rt(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function Oi(){return++uo}var it=$t.prototype;rt.prototype={constructor:rt,select:Hs,selectAll:Us,selectChild:it.selectChild,selectChildren:it.selectChildren,filter:Ts,merge:Ps,selection:Ys,transition:lo,call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:Ds,attr:ws,attrTween:ks,style:Ks,styleTween:eo,text:no,textTween:ao,remove:Ls,tween:ps,delay:Bs,duration:Ns,ease:As,easeVarying:Rs,end:ho,[Symbol.iterator]:it[Symbol.iterator]};function fo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var co={time:null,delay:0,duration:250,ease:fo};function po(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function vo(t){var e,r;t instanceof rt?(e=t._id,t=t._name):(e=Oi(),(r=co).time=we(),t=t==null?null:t+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var o=i[s],a=o.length,h,l=0;l<a;++l)(h=o[l])&&Kt(h,t,e,l,o,r||po(h,e));return new rt(i,this._parents,t,e)}$t.prototype.interrupt=fs;$t.prototype.transition=vo;const fe=Math.PI,ce=2*fe,lt=1e-6,yo=ce-lt;function Bi(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function _o(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Bi;const r=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*r)/r+i[n]}}class go{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Bi:_o(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,i,n){this._append`Q${+e},${+r},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,r,i,n,s,o){this._append`C${+e},${+r},${+i},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,i,n,s){if(e=+e,r=+r,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,h=i-e,l=n-r,u=o-e,f=a-r,c=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>lt)if(!(Math.abs(f*h-l*u)>lt)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let d=i-o,y=n-a,v=h*h+l*l,b=d*d+y*y,x=Math.sqrt(v),m=Math.sqrt(c),g=s*Math.tan((fe-Math.acos((v+c-b)/(2*x*m)))/2),w=g/m,I=g/x;Math.abs(w-1)>lt&&this._append`L${e+w*u},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*d>u*y)},${this._x1=e+I*h},${this._y1=r+I*l}`}}arc(e,r,i,n,s,o){if(e=+e,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(n),h=i*Math.sin(n),l=e+a,u=r+h,f=1^o,c=o?n-s:s-n;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>lt||Math.abs(this._y1-u)>lt)&&this._append`L${l},${u}`,i&&(c<0&&(c=c%ce+ce),c>yo?this._append`A${i},${i},0,1,${f},${e-a},${r-h}A${i},${i},0,1,${f},${this._x1=l},${this._y1=u}`:c>lt&&this._append`A${i},${i},0,${+(c>=fe)},${f},${this._x1=e+i*Math.cos(s)},${this._y1=r+i*Math.sin(s)}`)}rect(e,r,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function vt(t){return function(){return t}}const Ue=1e-12;function mo(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);e=i}return t},()=>new go(e)}function xo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $i(t){this._context=t}$i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function wo(t){return new $i(t)}function bo(t){return t[0]}function Io(t){return t[1]}function Mo(t,e){var r=vt(!0),i=null,n=wo,s=null,o=mo(a);t=typeof t=="function"?t:t===void 0?bo:vt(t),e=typeof e=="function"?e:e===void 0?Io:vt(e);function a(h){var l,u=(h=xo(h)).length,f,c=!1,d;for(i==null&&(s=n(d=o())),l=0;l<=u;++l)!(l<u&&r(f=h[l],l,h))===c&&((c=!c)?s.lineStart():s.lineEnd()),c&&s.point(+t(f,l,h),+e(f,l,h));if(d)return s=null,d+""||null}return a.x=function(h){return arguments.length?(t=typeof h=="function"?h:vt(+h),a):t},a.y=function(h){return arguments.length?(e=typeof h=="function"?h:vt(+h),a):e},a.defined=function(h){return arguments.length?(r=typeof h=="function"?h:vt(!!h),a):r},a.curve=function(h){return arguments.length?(n=h,i!=null&&(s=n(i)),a):n},a.context=function(h){return arguments.length?(h==null?i=s=null:s=n(i=h),a):i},a}function Xe(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function Me(t,e){this._context=t,this._k=(1-e)/6}Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Xe(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function r(i){return new Me(i,e)}return r.tension=function(i){return t(+i)},r})(0);function Co(t,e,r){var i=t._x1,n=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Ue){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,h=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/h,n=(n*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/h}if(t._l23_a>Ue){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*l+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*l+t._y1*t._l23_2a-r*t._l12_2a)/u}t._context.bezierCurveTo(i,n,s,o,t._x2,t._y2)}function Si(t,e){this._context=t,this._alpha=e}Si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Co(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ko=function t(e){function r(i){return e?new Si(i,e):new Me(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function yt(t,e,r){this.k=t,this.x=e,this.y=r}yt.prototype={constructor:yt,scale:function(t){return t===1?this:new yt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new yt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new yt(1,0,0);yt.prototype;var Eo=Object.create,Ce=Object.defineProperty,Oo=Object.getOwnPropertyDescriptor,Bo=Object.getOwnPropertyNames,$o=Object.getPrototypeOf,So=Object.prototype.hasOwnProperty,No=t=>Ce(t,"__esModule",{value:!0}),Ye=t=>{if(typeof require<"u")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')},A=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Vo=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Bo(e))!So.call(t,i)&&i!=="default"&&Ce(t,i,{get:()=>e[i],enumerable:!(r=Oo(e,i))||r.enumerable});return t},xt=t=>Vo(No(Ce(t!=null?Eo($o(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Ao=A((t,e)=>{function r(i,s){var s=s||{};this._head=0,this._tail=0,this._capacity=s.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(i)&&this._fromArray(i)}r.prototype.peekAt=function(i){var n=i;if(n===(n|0)){var s=this.size();if(!(n>=s||n<-s))return n<0&&(n+=s),n=this._head+n&this._capacityMask,this._list[n]}},r.prototype.get=function(i){return this.peekAt(i)},r.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},r.prototype.peekFront=function(){return this.peek()},r.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(r.prototype,"length",{get:function(){return this.size()}}),r.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.unshift=function(i){if(i===void 0)return this.size();var n=this._list.length;return this._head=this._head-1+n&this._capacityMask,this._list[this._head]=i,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.shift=function(){var i=this._head;if(i!==this._tail){var n=this._list[i];return this._list[i]=void 0,this._head=i+1&this._capacityMask,i<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),n}},r.prototype.push=function(i){if(i===void 0)return this.size();var n=this._tail;return this._list[n]=i,this._tail=n+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.pop=function(){var i=this._tail;if(i!==this._head){var n=this._list.length;this._tail=i-1+n&this._capacityMask;var s=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&i>1e4&&i<=n>>>2&&this._shrinkArray(),s}},r.prototype.removeOne=function(i){var n=i;if(n===(n|0)&&this._head!==this._tail){var s=this.size(),o=this._list.length;if(!(n>=s||n<-s)){n<0&&(n+=s),n=this._head+n&this._capacityMask;var a=this._list[n],h;if(i<s/2){for(h=i;h>0;h--)this._list[n]=this._list[n=n-1+o&this._capacityMask];this._list[n]=void 0,this._head=this._head+1+o&this._capacityMask}else{for(h=s-1-i;h>0;h--)this._list[n]=this._list[n=n+1+o&this._capacityMask];this._list[n]=void 0,this._tail=this._tail-1+o&this._capacityMask}return a}}},r.prototype.remove=function(i,n){var s=i,o,a=n;if(s===(s|0)&&this._head!==this._tail){var h=this.size(),l=this._list.length;if(!(s>=h||s<-h||n<1)){if(s<0&&(s+=h),n===1||!n)return o=new Array(1),o[0]=this.removeOne(s),o;if(s===0&&s+n>=h)return o=this.toArray(),this.clear(),o;s+n>h&&(n=h-s);var u;for(o=new Array(n),u=0;u<n;u++)o[u]=this._list[this._head+s+u&this._capacityMask];if(s=this._head+s&this._capacityMask,i+n===h){for(this._tail=this._tail-n+l&this._capacityMask,u=n;u>0;u--)this._list[s=s+1+l&this._capacityMask]=void 0;return o}if(i===0){for(this._head=this._head+n+l&this._capacityMask,u=n-1;u>0;u--)this._list[s=s+1+l&this._capacityMask]=void 0;return o}if(s<h/2){for(this._head=this._head+i+n+l&this._capacityMask,u=i;u>0;u--)this.unshift(this._list[s=s-1+l&this._capacityMask]);for(s=this._head-1+l&this._capacityMask;a>0;)this._list[s=s-1+l&this._capacityMask]=void 0,a--;i<0&&(this._tail=s)}else{for(this._tail=s,s=s+n+l&this._capacityMask,u=h-(n+i);u>0;u--)this.push(this._list[s++]);for(s=this._tail;a>0;)this._list[s=s+1+l&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=l>>>2&&this._shrinkArray(),o}}},r.prototype.splice=function(i,n){var s=i;if(s===(s|0)){var o=this.size();if(s<0&&(s+=o),!(s>o))if(arguments.length>2){var a,h,l,u=arguments.length,f=this._list.length,c=2;if(!o||s<o/2){for(h=new Array(s),a=0;a<s;a++)h[a]=this._list[this._head+a&this._capacityMask];for(n===0?(l=[],s>0&&(this._head=this._head+s+f&this._capacityMask)):(l=this.remove(s,n),this._head=this._head+s+f&this._capacityMask);u>c;)this.unshift(arguments[--u]);for(a=s;a>0;a--)this.unshift(h[a-1])}else{h=new Array(o-(s+n));var d=h.length;for(a=0;a<d;a++)h[a]=this._list[this._head+s+n+a&this._capacityMask];for(n===0?(l=[],s!=o&&(this._tail=this._head+s+f&this._capacityMask)):(l=this.remove(s,n),this._tail=this._tail-d+f&this._capacityMask);c<u;)this.push(arguments[c++]);for(a=0;a<d;a++)this.push(h[a])}return l}else return this.remove(s,n)}},r.prototype.clear=function(){this._head=0,this._tail=0},r.prototype.isEmpty=function(){return this._head===this._tail},r.prototype.toArray=function(){return this._copyArray(!1)},r.prototype._fromArray=function(i){for(var n=0;n<i.length;n++)this.push(i[n])},r.prototype._copyArray=function(i){var n=[],s=this._list,o=s.length,a;if(i||this._head>this._tail){for(a=this._head;a<o;a++)n.push(s[a]);for(a=0;a<this._tail;a++)n.push(s[a])}else for(a=this._head;a<this._tail;a++)n.push(s[a]);return n},r.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length*=2,this._capacityMask=this._capacityMask<<1|1},r.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=r}),zo=A((t,e)=>{var r=1e-60,i,n;do r+=r,i=1+.1*r,n=1+.2*r;while(i<=1||n<=1);e.exports=r}),Ro=A((t,e)=>{function r(i,n,s){let o,a;for(let h=1;h<=s;h+=1){i[h][h]=1/i[h][h],a=-i[h][h];for(let l=1;l<h;l+=1)i[l][h]*=a;if(o=h+1,s<o)break;for(let l=o;l<=s;l+=1){a=i[h][l],i[h][l]=0;for(let u=1;u<=h;u+=1)i[u][l]+=a*i[u][h]}}}e.exports=r}),To=A((t,e)=>{function r(i,n,s,o){let a,h;for(a=1;a<=s;a+=1){h=0;for(let l=1;l<a;l+=1)h+=i[l][a]*o[l];o[a]=(o[a]-h)/i[a][a]}for(let l=1;l<=s;l+=1){a=s+1-l,o[a]/=i[a][a],h=-o[a];for(let u=1;u<a;u+=1)o[u]+=h*i[u][a]}}e.exports=r}),Po=A((t,e)=>{function r(i,n,s,o){let a,h,l;for(let u=1;u<=s;u+=1){if(o[1]=u,l=0,a=u-1,a<1){if(l=i[u][u]-l,l<=0)break;i[u][u]=Math.sqrt(l)}else{for(let f=1;f<=a;f+=1){h=i[f][u];for(let c=1;c<f;c+=1)h-=i[c][u]*i[c][f];h/=i[f][f],i[f][u]=h,l+=h*h}if(l=i[u][u]-l,l<=0)break;i[u][u]=Math.sqrt(l)}o[1]=0}}e.exports=r}),jo=A((t,e)=>{var r=zo(),i=Ro(),n=To(),s=Po();function o(a,h,l,u,f,c,d,y,v,b,x,m,g,w=0,I,_,S){let M,O,C,$,k,B,T,F,V,P,tt,L,ot,H,et=Math.min(u,x),j=2*u+et*(et+5)/2+2*x+1;for(let p=1;p<=u;p+=1)_[p]=h[p];for(let p=u+1;p<=j;p+=1)_[p]=0;for(let p=1;p<=x;p+=1)g[p]=0,c[p]=0;let Vt=[];if(S[1]===0){if(s(a,l,u,Vt),Vt[1]!==0){S[1]=2;return}n(a,l,u,h),i(a,l,u)}else{for(let p=1;p<=u;p+=1){f[p]=0;for(let E=1;E<=p;E+=1)f[p]+=a[E][p]*h[E]}for(let p=1;p<=u;p+=1){h[p]=0;for(let E=p;E<=u;E+=1)h[p]+=a[p][E]*f[E]}}d[1]=0;for(let p=1;p<=u;p+=1){f[p]=h[p],d[1]+=_[p]*f[p],_[p]=0;for(let E=p+1;E<=u;E+=1)a[E][p]=0}d[1]=-d[1]/2,S[1]=0;let G=u,U=G+u,R=U+et,at=R+et+1,X=at+et*(et+1)/2,pt=X+x;for(let p=1;p<=x;p+=1){B=0;for(let E=1;E<=u;E+=1)B+=y[E][p]*y[E][p];_[pt+p]=Math.sqrt(B)}$=w,I[1]=0,I[2]=0;function qi(){I[1]+=1,j=X;for(let p=1;p<=x;p+=1){j+=1,B=-v[p];for(let E=1;E<=u;E+=1)B+=y[E][p]*f[E];if(Math.abs(B)<r&&(B=0),p>m)_[j]=B;else if(_[j]=-Math.abs(B),B>0){for(let E=1;E<=u;E+=1)y[E][p]=-y[E][p];v[p]=-v[p]}}for(let p=1;p<=$;p+=1)_[X+g[p]]=0;C=0,k=0;for(let p=1;p<=x;p+=1)_[X+p]<k*_[pt+p]&&(C=p,k=_[X+p]/_[pt+p]);if(C===0){for(let p=1;p<=$;p+=1)c[g[p]]=_[R+p];return 999}return 0}function Li(){for(let p=1;p<=u;p+=1){B=0;for(let E=1;E<=u;E+=1)B+=a[E][p]*y[E][C];_[p]=B}M=G;for(let p=1;p<=u;p+=1)_[M+p]=0;for(let p=$+1;p<=u;p+=1)for(let E=1;E<=u;E+=1)_[M+E]=_[M+E]+a[E][p]*_[p];L=!0;for(let p=$;p>=1;p-=1){B=_[p],j=at+p*(p+3)/2,M=j-p;for(let E=p+1;E<=$;E+=1)B-=_[j]*_[U+E],j+=E;B/=_[M],_[U+p]=B,!(g[p]<=m)&&(B<=0||(L=!1,O=p))}if(!L){T=_[R+O]/_[U+O];for(let p=1;p<=$;p+=1)g[p]<=m||_[U+p]<=0||(k=_[R+p]/_[U+p],k<T&&(T=k,O=p))}B=0;for(let p=G+1;p<=G+u;p+=1)B+=_[p]*_[p];if(Math.abs(B)<=r){if(L)return S[1]=1,999;for(let p=1;p<=$;p+=1)_[R+p]=_[R+p]-T*_[U+p];return _[R+$+1]=_[R+$+1]+T,700}B=0;for(let p=1;p<=u;p+=1)B+=_[G+p]*y[p][C];F=-_[X+C]/B,ot=!0,L||T<F&&(F=T,ot=!1);for(let p=1;p<=u;p+=1)f[p]+=F*_[G+p],Math.abs(f[p])<r&&(f[p]=0);d[1]+=F*B*(F/2+_[R+$+1]);for(let p=1;p<=$;p+=1)_[R+p]=_[R+p]-F*_[U+p];if(_[R+$+1]=_[R+$+1]+F,ot){$+=1,g[$]=C,j=at+($-1)*$/2+1;for(let p=1;p<=$-1;p+=1)_[j]=_[p],j+=1;if($===u)_[j]=_[u];else{for(let p=u;p>=$+1;p-=1)if(_[p]!==0&&(V=Math.max(Math.abs(_[p-1]),Math.abs(_[p])),P=Math.min(Math.abs(_[p-1]),Math.abs(_[p])),_[p-1]>=0?k=Math.abs(V*Math.sqrt(1+P*P/(V*V))):k=-Math.abs(V*Math.sqrt(1+P*P/(V*V))),V=_[p-1]/k,P=_[p]/k,V!==1))if(V===0){_[p-1]=P*k;for(let E=1;E<=u;E+=1)k=a[E][p-1],a[E][p-1]=a[E][p],a[E][p]=k}else{_[p-1]=k,tt=P/(1+V);for(let E=1;E<=u;E+=1)k=V*a[E][p-1]+P*a[E][p],a[E][p]=tt*(a[E][p-1]+k)-a[E][p],a[E][p-1]=k}_[j]=_[$]}}else{B=-v[C];for(let p=1;p<=u;p+=1)B+=f[p]*y[p][C];if(C>m)_[X+C]=B;else if(_[X+C]=-Math.abs(B),B>0){for(let p=1;p<=u;p+=1)y[p][C]=-y[p][C];v[C]=-v[C]}return 700}return 0}function Hi(){if(j=at+O*(O+1)/2+1,M=j+O,_[M]===0||(V=Math.max(Math.abs(_[M-1]),Math.abs(_[M])),P=Math.min(Math.abs(_[M-1]),Math.abs(_[M])),_[M-1]>=0?k=Math.abs(V*Math.sqrt(1+P*P/(V*V))):k=-Math.abs(V*Math.sqrt(1+P*P/(V*V))),V=_[M-1]/k,P=_[M]/k,V===1))return 798;if(V===0){for(let p=O+1;p<=$;p+=1)k=_[M-1],_[M-1]=_[M],_[M]=k,M+=p;for(let p=1;p<=u;p+=1)k=a[p][O],a[p][O]=a[p][O+1],a[p][O+1]=k}else{tt=P/(1+V);for(let p=O+1;p<=$;p+=1)k=V*_[M-1]+P*_[M],_[M]=tt*(_[M-1]+k)-_[M],_[M-1]=k,M+=p;for(let p=1;p<=u;p+=1)k=V*a[p][O]+P*a[p][O+1],a[p][O+1]=tt*(a[p][O]+k)-a[p][O+1],a[p][O]=k}return 0}function Ui(){M=j-O;for(let p=1;p<=O;p+=1)_[M]=_[j],j+=1,M+=1;return _[R+O]=_[R+O+1],g[O]=g[O+1],O+=1,O<$?797:0}function Oe(){return _[R+$]=_[R+$+1],_[R+$+1]=0,g[$]=0,$-=1,I[2]+=1,0}for(H=0;;){if(H=qi(),H===999)return;for(;H=Li(),H!==0;){if(H===999)return;if(H===700)if(O===$)Oe();else{for(;Hi(),H=Ui(),H===797;);Oe()}}}}e.exports=o}),Fo=A(t=>{var e=jo();function r(i,n,s,o=[],a=0,h=[0,0]){let l=[],u=[],f=[],c=[],d=[],y=[],v="",b=i.length-1,x=s[1].length-1;if(!o)for(let w=1;w<=x;w+=1)o[w]=0;if(b!==i[1].length-1&&(v="Dmat is not symmetric!"),b!==n.length-1&&(v="Dmat and dvec are incompatible!"),b!==s.length-1&&(v="Amat and dvec are incompatible!"),x!==o.length-1&&(v="Amat and bvec are incompatible!"),(a>x||a<0)&&(v="Value of meq is invalid!"),v!=="")return{message:v};for(let w=1;w<=x;w+=1)u[w]=0,c[w]=0;let m=0,g=Math.min(b,x);for(let w=1;w<=b;w+=1)f[w]=0;l[1]=0;for(let w=1;w<=2*b+g*(g+5)/2+2*x+1;w+=1)d[w]=0;for(let w=1;w<=2;w+=1)y[w]=0;return e(i,n,b,b,f,c,l,s,o,b,x,a,u,m,y,d,h),h[1]===1&&(v="constraints are inconsistent, no solution!"),h[1]===2&&(v="matrix D in quadratic function is not positive definite!"),{solution:f,Lagrangian:c,value:l,unconstrained_solution:n,iterations:y,iact:u,message:v}}t.solveQP=r}),Do=A((t,e)=>{e.exports=Fo()}),Ni=A((t,e)=>{function r(i,n,s,o){this.feasible=s,this.evaluation=n,this.bounded=o,this._tableau=i}e.exports=r,r.prototype.generateSolutionSet=function(){for(var i={},n=this._tableau,s=n.varIndexByRow,o=n.variablesPerIndex,a=n.matrix,h=n.rhsColumn,l=n.height-1,u=Math.round(1/n.precision),f=1;f<=l;f+=1){var c=s[f],d=o[c];if(!(d===void 0||d.isSlack===!0)){var y=a[f][h];i[d.id]=Math.round((Number.EPSILON+y)*u)/u}}return i}}),qo=A((t,e)=>{var r=Ni();function i(n,s,o,a,h){r.call(this,n,s,o,a),this.iter=h}e.exports=i,i.prototype=Object.create(r.prototype),i.constructor=i}),Q=A((t,e)=>{var r=Ni(),i=qo();function n(o){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=o||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}e.exports=n,n.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function s(o,a){this.priority=o,this.reducedCosts=new Array(a);for(var h=0;h<a;h+=1)this.reducedCosts[h]=0}s.prototype.copy=function(){var o=new s(this.priority,this.reducedCosts.length);return o.reducedCosts=this.reducedCosts.slice(),o},n.prototype.setOptionalObjective=function(o,a,h){var l=this.objectivesByPriority[o];if(l===void 0){var u=Math.max(this.width,a+1);l=new s(o,u),this.objectivesByPriority[o]=l,this.optionalObjectives.push(l),this.optionalObjectives.sort(function(f,c){return f.priority-c.priority})}l.reducedCosts[a]=h},n.prototype.initialize=function(o,a,h,l){this.variables=h,this.unrestrictedVars=l,this.width=o,this.height=a;for(var u=new Array(o),f=0;f<o;f++)u[f]=0;this.matrix=new Array(a);for(var c=0;c<a;c++)this.matrix[c]=u.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=o+a-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},n.prototype._resetMatrix=function(){var o=this.model.variables,a=this.model.constraints,h=o.length,l=a.length,u,f,c=this.matrix[0],d=this.model.isMinimization===!0?-1:1;for(u=0;u<h;u+=1){var y=o[u],v=y.priority,b=d*y.cost;v===0?c[u+1]=b:this.setOptionalObjective(v,u+1,b),f=o[u].index,this.rowByVarIndex[f]=-1,this.colByVarIndex[f]=u+1,this.varIndexByCol[u+1]=f}for(var x=1,m=0;m<l;m+=1){var g=a[m],w=g.index;this.rowByVarIndex[w]=x,this.colByVarIndex[w]=-1,this.varIndexByRow[x]=w;var I,_,S,M=g.terms,O=M.length,C=this.matrix[x++];if(g.isUpperBound){for(I=0;I<O;I+=1)_=M[I],S=this.colByVarIndex[_.variable.index],C[S]=_.coefficient;C[0]=g.rhs}else{for(I=0;I<O;I+=1)_=M[I],S=this.colByVarIndex[_.variable.index],C[S]=-_.coefficient;C[0]=-g.rhs}}},n.prototype.setModel=function(o){this.model=o;var a=o.nVariables+1,h=o.nConstraints+1;return this.initialize(a,h,o.variables,o.unrestrictedVariables),this._resetMatrix(),this},n.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var o=this.lastElementIndex;return this.lastElementIndex+=1,o},n.prototype.density=function(){for(var o=0,a=this.matrix,h=0;h<this.height;h++)for(var l=a[h],u=0;u<this.width;u++)l[u]!==0&&(o+=1);return o/(this.height*this.width)},n.prototype.setEvaluation=function(){var o=Math.round(1/this.precision),a=this.matrix[this.costRowIndex][this.rhsColumn],h=Math.round((Number.EPSILON+a)*o)/o;this.evaluation=h,this.simplexIters===0&&(this.bestPossibleEval=h)},n.prototype.getSolution=function(){var o=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new i(this,o,this.feasible,this.bounded,this.branchAndCutIterations):new r(this,o,this.feasible,this.bounded)}}),Lo=A(()=>{var t=Q();t.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},t.prototype.phase1=function(){for(var r=this.model.checkForCycles,i=[],n=this.matrix,s=this.rhsColumn,o=this.width-1,a=this.height-1,h,l=0;;){for(var u=0,f=-this.precision,c=1;c<=a;c++){h=this.unrestrictedVars[this.varIndexByRow[c]]===!0;var d=n[c][s];d<f&&(f=d,u=c)}if(u===0)return this.feasible=!0,l;for(var y=0,v=-1/0,b=n[0],x=n[u],m=1;m<=o;m++){var g=x[m];if(h=this.unrestrictedVars[this.varIndexByCol[m]]===!0,h||g<-this.precision){var w=-b[m]/g;v<w&&(v=w,y=m)}}if(y===0)return this.feasible=!1,l;if(r){i.push([this.varIndexByRow[u],this.varIndexByCol[y]]);var I=this.checkForCycles(i);if(I.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+I[0]),this.model.messages.push("Length :"+I[1]),this.feasible=!1,l}this.pivot(u,y),l+=1}},t.prototype.phase2=function(){for(var r=this.model.checkForCycles,i=[],n=this.matrix,s=this.rhsColumn,o=this.width-1,a=this.height-1,h=this.precision,l=this.optionalObjectives.length,u=null,f=0,c,d;;){var y=n[this.costRowIndex];l>0&&(u=[]);for(var v=0,b=h,x=!1,m=1;m<=o;m++){if(c=y[m],d=this.unrestrictedVars[this.varIndexByCol[m]]===!0,l>0&&-h<c&&c<h){u.push(m);continue}if(d&&c<0){-c>b&&(b=-c,v=m,x=!0);continue}c>b&&(b=c,v=m,x=!1)}if(l>0)for(var g=0;v===0&&u.length>0&&g<l;){var w=[],I=this.optionalObjectives[g].reducedCosts;b=h;for(var _=0;_<u.length;_++){if(m=u[_],c=I[m],d=this.unrestrictedVars[this.varIndexByCol[m]]===!0,-h<c&&c<h){w.push(m);continue}if(d&&c<0){-c>b&&(b=-c,v=m,x=!0);continue}c>b&&(b=c,v=m,x=!1)}u=w,g+=1}if(v===0)return this.setEvaluation(),this.simplexIters+=1,f;for(var S=0,M=1/0,O=this.varIndexByRow,C=1;C<=a;C++){var $=n[C],k=$[s],B=$[v];if(!(-h<B&&B<h)){if(B>0&&h>k&&k>-h){M=0,S=C;break}var T=x?-k/B:k/B;T>h&&M>T&&(M=T,S=C)}}if(M===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[v],f;if(r){i.push([this.varIndexByRow[S],this.varIndexByCol[v]]);var F=this.checkForCycles(i);if(F.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+F[0]),this.model.messages.push("Length :"+F[1]),this.feasible=!1,f}this.pivot(S,v,!0),f+=1}};var e=[];t.prototype.pivot=function(r,i){var n=this.matrix,s=n[r][i],o=this.height-1,a=this.width-1,h=this.varIndexByRow[r],l=this.varIndexByCol[i];this.varIndexByRow[r]=l,this.varIndexByCol[i]=h,this.rowByVarIndex[l]=r,this.rowByVarIndex[h]=-1,this.colByVarIndex[l]=-1,this.colByVarIndex[h]=i;for(var u=n[r],f=0,c=0;c<=a;c++)u[c]>=-1e-16&&u[c]<=1e-16?u[c]=0:(u[c]/=s,e[f]=c,f+=1);u[i]=1/s;for(var d,y,v,b=this.precision,x=0;x<=o;x++)if(x!==r&&!(n[x][i]>=-1e-16&&n[x][i]<=1e-16)){var m=n[x];if(d=m[i],d>=-1e-16&&d<=1e-16)d!==0&&(m[i]=0);else{for(y=0;y<f;y++)c=e[y],v=u[c],v>=-1e-16&&v<=1e-16?v!==0&&(u[c]=0):m[c]=m[c]-d*v;m[i]=-d/s}}var g=this.optionalObjectives.length;if(g>0)for(var w=0;w<g;w+=1){var I=this.optionalObjectives[w].reducedCosts;if(d=I[i],d!==0){for(y=0;y<f;y++)c=e[y],v=u[c],v!==0&&(I[c]=I[c]-d*v);I[i]=-d/s}}},t.prototype.checkForCycles=function(r){for(var i=0;i<r.length-1;i++)for(var n=i+1;n<r.length;n++){var s=r[i],o=r[n];if(s[0]===o[0]&&s[1]===o[1]){if(n-i>r.length-n)break;for(var a=!0,h=1;h<n-i;h++){var l=r[i+h],u=r[n+h];if(l[0]!==u[0]||l[1]!==u[1]){a=!1;break}}if(a)return[i,n-i]}}return[]}}),ke=A((t,e)=>{function r(l,u,f,c){this.id=l,this.cost=u,this.index=f,this.value=0,this.priority=c}function i(l,u,f,c){r.call(this,l,u,f,c)}i.prototype.isInteger=!0;function n(l,u){r.call(this,l,0,u,0)}n.prototype.isSlack=!0;function s(l,u){this.variable=l,this.coefficient=u}function o(l,u,f){return f===0||f==="required"?null:(u=u||1,f=f||1,l.isMinimization===!1&&(u=-u),l.addVariable(u,"r"+l.relaxationIndex++,!1,!1,f))}function a(l,u,f,c){this.slack=new n("s"+f,f),this.index=f,this.model=c,this.rhs=l,this.isUpperBound=u,this.terms=[],this.termsByVarIndex={},this.relaxation=null}a.prototype.addTerm=function(l,u){var f=u.index,c=this.termsByVarIndex[f];if(c===void 0)c=new s(u,l),this.termsByVarIndex[f]=c,this.terms.push(c),this.isUpperBound===!0&&(l=-l),this.model.updateConstraintCoefficient(this,u,l);else{var d=c.coefficient+l;this.setVariableCoefficient(d,u)}return this},a.prototype.removeTerm=function(l){return this},a.prototype.setRightHandSide=function(l){if(l!==this.rhs){var u=l-this.rhs;this.isUpperBound===!0&&(u=-u),this.rhs=l,this.model.updateRightHandSide(this,u)}return this},a.prototype.setVariableCoefficient=function(l,u){var f=u.index;if(f===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var c=this.termsByVarIndex[f];if(c===void 0)this.addTerm(l,u);else if(l!==c.coefficient){var d=l-c.coefficient;this.isUpperBound===!0&&(d=-d),c.coefficient=l,this.model.updateConstraintCoefficient(this,u,d)}return this},a.prototype.relax=function(l,u){this.relaxation=o(this.model,l,u),this._relax(this.relaxation)},a.prototype._relax=function(l){l!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,l):this.setVariableCoefficient(1,l))};function h(l,u){this.upperBound=l,this.lowerBound=u,this.model=l.model,this.rhs=l.rhs,this.relaxation=null}h.prototype.isEquality=!0,h.prototype.addTerm=function(l,u){return this.upperBound.addTerm(l,u),this.lowerBound.addTerm(l,u),this},h.prototype.removeTerm=function(l){return this.upperBound.removeTerm(l),this.lowerBound.removeTerm(l),this},h.prototype.setRightHandSide=function(l){this.upperBound.setRightHandSide(l),this.lowerBound.setRightHandSide(l),this.rhs=l},h.prototype.relax=function(l,u){this.relaxation=o(this.model,l,u),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},e.exports={Constraint:a,Variable:r,IntegerVariable:i,SlackVariable:n,Equality:h,Term:s}}),Ho=A(()=>{var t=Q(),e=ke().SlackVariable;t.prototype.addCutConstraints=function(r){for(var i=r.length,n=this.height,s=n+i,o=n;o<s;o+=1)this.matrix[o]===void 0&&(this.matrix[o]=this.matrix[o-1].slice());this.height=s,this.nVars=this.width+this.height-2;for(var a,h=this.width-1,l=0;l<i;l+=1){var u=r[l],f=n+l,c=u.type==="min"?-1:1,d=u.varIndex,y=this.rowByVarIndex[d],v=this.matrix[f];if(y===-1){for(v[this.rhsColumn]=c*u.value,a=1;a<=h;a+=1)v[a]=0;v[this.colByVarIndex[d]]=c}else{var b=this.matrix[y],x=b[this.rhsColumn];for(v[this.rhsColumn]=c*(u.value-x),a=1;a<=h;a+=1)v[a]=-c*b[a]}var m=this.getNewElementIndex();this.varIndexByRow[f]=m,this.rowByVarIndex[m]=f,this.colByVarIndex[m]=-1,this.variablesPerIndex[m]=new e("s"+m,m),this.nVars+=1}},t.prototype._addLowerBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var i=this.matrix,n=this.variablesPerIndex[this.varIndexByRow[r]];if(!n.isInteger)return!1;var s=i[r][this.rhsColumn],o=s-Math.floor(s);if(o<this.precision||1-this.precision<o)return!1;var a=this.height;i[a]=i[a-1].slice(),this.height+=1,this.nVars+=1;var h=this.getNewElementIndex();this.varIndexByRow[a]=h,this.rowByVarIndex[h]=a,this.colByVarIndex[h]=-1,this.variablesPerIndex[h]=new e("s"+h,h),i[a][this.rhsColumn]=Math.floor(s);for(var l=1;l<this.varIndexByCol.length;l+=1){var u=this.variablesPerIndex[this.varIndexByCol[l]];if(!u.isInteger)i[a][l]=Math.min(0,i[r][l]/(1-o));else{var f=i[r][l],c=Math.floor(f)+Math.max(0,f-Math.floor(f)-o)/(1-o);i[a][l]=c}}for(var d=0;d<this.width;d+=1)i[a][d]-=i[r][d];return!0},t.prototype._addUpperBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var i=this.matrix,n=this.variablesPerIndex[this.varIndexByRow[r]];if(!n.isInteger)return!1;var s=i[r][this.rhsColumn],o=s-Math.floor(s);if(o<this.precision||1-this.precision<o)return!1;var a=this.height;i[a]=i[a-1].slice(),this.height+=1,this.nVars+=1;var h=this.getNewElementIndex();this.varIndexByRow[a]=h,this.rowByVarIndex[h]=a,this.colByVarIndex[h]=-1,this.variablesPerIndex[h]=new e("s"+h,h),i[a][this.rhsColumn]=-o;for(var l=1;l<this.varIndexByCol.length;l+=1){var u=this.variablesPerIndex[this.varIndexByCol[l]],f=i[r][l],c=f-Math.floor(f);u.isInteger?c<=o?i[a][l]=-c:i[a][l]=-(1-c)*o/c:f>=0?i[a][l]=-f:i[a][l]=f*o/(1-o)}return!0},t.prototype.applyMIRCuts=function(){}}),Uo=A(()=>{var t=Q();t.prototype._putInBase=function(e){var r=this.rowByVarIndex[e];if(r===-1){for(var i=this.colByVarIndex[e],n=1;n<this.height;n+=1){var s=this.matrix[n][i];if(s<-this.precision||this.precision<s){r=n;break}}this.pivot(r,i)}return r},t.prototype._takeOutOfBase=function(e){var r=this.colByVarIndex[e];if(r===-1){for(var i=this.rowByVarIndex[e],n=this.matrix[i],s=1;s<this.height;s+=1){var o=n[s];if(o<-this.precision||this.precision<o){r=s;break}}this.pivot(i,r)}return r},t.prototype.updateVariableValues=function(){for(var e=this.variables.length,r=Math.round(1/this.precision),i=0;i<e;i+=1){var n=this.variables[i],s=n.index,o=this.rowByVarIndex[s];if(o===-1)n.value=0;else{var a=this.matrix[o][this.rhsColumn];n.value=Math.round((a+Number.EPSILON)*r)/r}}},t.prototype.updateRightHandSide=function(e,r){var i=this.height-1,n=this.rowByVarIndex[e.index];if(n===-1){for(var s=this.colByVarIndex[e.index],o=0;o<=i;o+=1){var a=this.matrix[o];a[this.rhsColumn]-=r*a[s]}var h=this.optionalObjectives.length;if(h>0)for(var l=0;l<h;l+=1){var u=this.optionalObjectives[l].reducedCosts;u[this.rhsColumn]-=r*u[s]}}else this.matrix[n][this.rhsColumn]-=r},t.prototype.updateConstraintCoefficient=function(e,r,i){if(e.index===r.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var n=this._putInBase(e.index),s=this.colByVarIndex[r.index];if(s===-1)for(var o=this.rowByVarIndex[r.index],a=0;a<this.width;a+=1)this.matrix[n][a]+=i*this.matrix[o][a];else this.matrix[n][s]-=i},t.prototype.updateCost=function(e,r){var i=e.index,n=this.width-1,s=this.colByVarIndex[i];if(s===-1){var o=this.matrix[this.rowByVarIndex[i]],a;if(e.priority===0){var h=this.matrix[0];for(a=0;a<=n;a+=1)h[a]+=r*o[a]}else{var l=this.objectivesByPriority[e.priority].reducedCosts;for(a=0;a<=n;a+=1)l[a]+=r*o[a]}}else this.matrix[0][s]-=r},t.prototype.addConstraint=function(e){var r=e.isUpperBound?1:-1,i=this.height,n=this.matrix[i];n===void 0&&(n=this.matrix[0].slice(),this.matrix[i]=n);for(var s=this.width-1,o=0;o<=s;o+=1)n[o]=0;n[this.rhsColumn]=r*e.rhs;for(var a=e.terms,h=a.length,l=0;l<h;l+=1){var u=a[l],f=u.coefficient,c=u.variable.index,d=this.rowByVarIndex[c];if(d===-1)n[this.colByVarIndex[c]]+=r*f;else{var y=this.matrix[d];for(y[this.rhsColumn],o=0;o<=s;o+=1)n[o]-=r*f*y[o]}}var v=e.index;this.varIndexByRow[i]=v,this.rowByVarIndex[v]=i,this.colByVarIndex[v]=-1,this.height+=1},t.prototype.removeConstraint=function(e){var r=e.index,i=this.height-1,n=this._putInBase(r),s=this.matrix[i];this.matrix[i]=this.matrix[n],this.matrix[n]=s,this.varIndexByRow[n]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,e.slack.index=-1,this.height-=1},t.prototype.addVariable=function(e){var r=this.height-1,i=this.width,n=this.model.isMinimization===!0?-e.cost:e.cost,s=e.priority,o=this.optionalObjectives.length;if(o>0)for(var a=0;a<o;a+=1)this.optionalObjectives[a].reducedCosts[i]=0;s===0?this.matrix[0][i]=n:(this.setOptionalObjective(s,i,n),this.matrix[0][i]=0);for(var h=1;h<=r;h+=1)this.matrix[h][i]=0;var l=e.index;this.varIndexByCol[i]=l,this.rowByVarIndex[l]=-1,this.colByVarIndex[l]=i,this.width+=1},t.prototype.removeVariable=function(e){var r=e.index,i=this._takeOutOfBase(r),n=this.width-1;if(i!==n){for(var s=this.height-1,o=0;o<=s;o+=1){var a=this.matrix[o];a[i]=a[n]}var h=this.optionalObjectives.length;if(h>0)for(var l=0;l<h;l+=1){var u=this.optionalObjectives[l].reducedCosts;u[i]=u[n]}var f=this.varIndexByCol[n];this.varIndexByCol[i]=f,this.colByVarIndex[f]=i}this.varIndexByCol[n]=-1,this.colByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,e.index=-1,this.width-=1}}),Xo=A(()=>{var t=Q();t.prototype.log=function(e,r){console.log("****",e,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i=5,n="",s=[" "],o,a,h,l,u,f,c,d,y,v,b;for(a=1;a<this.width;a+=1)u=this.varIndexByCol[a],l=this.variablesPerIndex[u],l===void 0?f="c"+u:f=l.id,c=f.length,d=" ",y="	",c>5?d+=" ":y+="	",s[a]=d,n+=y+f;console.log(n);var x,m=this.matrix[this.costRowIndex],g="	";for(o=1;o<this.width;o+=1)x="	",g+=x,g+=s[o],g+=m[o].toFixed(i);for(x="	",g+=x+s[0]+m[0].toFixed(i),console.log(g+"	Z"),h=1;h<this.height;h+=1){for(v=this.matrix[h],b="	",a=1;a<this.width;a+=1)x="	",b+=x+s[a]+v[a].toFixed(i);x="	",b+=x+s[0]+v[0].toFixed(i),u=this.varIndexByRow[h],l=this.variablesPerIndex[u],l===void 0?f="c"+u:f=l.id,console.log(b+"	"+f)}console.log("");var w=this.optionalObjectives.length;if(w>0){console.log("    Optional objectives:");for(var I=0;I<w;I+=1){var _=this.optionalObjectives[I].reducedCosts,S="";for(o=1;o<this.width;o+=1)x=_[o]<0?"":" ",S+=x,S+=s[o],S+=_[o].toFixed(i);x=_[0]<0?"":" ",S+=x+s[0]+_[0].toFixed(i),console.log(S+" z"+I)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}}),Yo=A(()=>{var t=Q();t.prototype.copy=function(){var e=new t(this.precision);e.width=this.width,e.height=this.height,e.nVars=this.nVars,e.model=this.model,e.variables=this.variables,e.variablesPerIndex=this.variablesPerIndex,e.unrestrictedVars=this.unrestrictedVars,e.lastElementIndex=this.lastElementIndex,e.varIndexByRow=this.varIndexByRow.slice(),e.varIndexByCol=this.varIndexByCol.slice(),e.rowByVarIndex=this.rowByVarIndex.slice(),e.colByVarIndex=this.colByVarIndex.slice(),e.availableIndexes=this.availableIndexes.slice();for(var r=[],i=0;i<this.optionalObjectives.length;i++)r[i]=this.optionalObjectives[i].copy();e.optionalObjectives=r;for(var n=this.matrix,s=new Array(this.height),o=0;o<this.height;o++)s[o]=n[o].slice();return e.matrix=s,e},t.prototype.save=function(){this.savedState=this.copy()},t.prototype.restore=function(){if(this.savedState!==null){var e=this.savedState,r=e.matrix;this.nVars=e.nVars,this.model=e.model,this.variables=e.variables,this.variablesPerIndex=e.variablesPerIndex,this.unrestrictedVars=e.unrestrictedVars,this.lastElementIndex=e.lastElementIndex,this.width=e.width,this.height=e.height;var i,n;for(i=0;i<this.height;i+=1){var s=r[i],o=this.matrix[i];for(n=0;n<this.width;n+=1)o[n]=s[n]}var a=e.varIndexByRow;for(n=0;n<this.height;n+=1)this.varIndexByRow[n]=a[n];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var h=e.varIndexByCol;for(i=0;i<this.width;i+=1)this.varIndexByCol[i]=h[i];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var l=e.rowByVarIndex,u=e.colByVarIndex,f=0;f<this.nVars;f+=1)this.rowByVarIndex[f]=l[f],this.colByVarIndex[f]=u[f];if(e.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var c=0;c<e.optionalObjectives.length;c++){var d=e.optionalObjectives[c].copy();this.optionalObjectives[c]=d,this.optionalObjectivePerPriority[d.priority]=d}}}}}),Wo=A(()=>{var t=Q();function e(r,i){this.index=r,this.value=i}t.prototype.getMostFractionalVar=function(){for(var r=0,i=null,n=null,s=.5,o=this.model.integerVariables,a=o.length,h=0;h<a;h++){var l=o[h].index,u=this.rowByVarIndex[l];if(u!==-1){var f=this.matrix[u][this.rhsColumn],c=Math.abs(f-Math.round(f));r<c&&(r=c,i=l,n=f)}}return new e(i,n)},t.prototype.getFractionalVarWithLowestCost=function(){for(var r=1/0,i=null,n=null,s=this.model.integerVariables,o=s.length,a=0;a<o;a++){var h=s[a],l=h.index,u=this.rowByVarIndex[l];if(u!==-1){var f=this.matrix[u][this.rhsColumn];if(Math.abs(f-Math.round(f))>this.precision){var c=h.cost;r>c&&(r=c,i=l,n=f)}}}return new e(i,n)}}),Go=A(()=>{var t=Q();t.prototype.countIntegerValues=function(){for(var e=0,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var i=this.matrix[r][this.rhsColumn];i=i-Math.floor(i),i<this.precision&&-i<this.precision&&(e+=1)}return e},t.prototype.isIntegral=function(){for(var e=this.model.integerVariables,r=e.length,i=0;i<r;i++){var n=this.rowByVarIndex[e[i].index];if(n!==-1){var s=this.matrix[n][this.rhsColumn];if(Math.abs(s-Math.round(s))>this.precision)return!1}}return!0},t.prototype.computeFractionalVolume=function(e){for(var r=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var n=this.matrix[i][this.rhsColumn];n=Math.abs(n);var s=Math.min(n-Math.floor(n),Math.floor(n+1));if(s<this.precision){if(!e)return 0}else r===-1?r=n:r*=n}return r===-1?0:r}}),Zo=A((t,e)=>{Lo(),Ho(),Uo(),Xo(),Yo(),Wo(),Go(),e.exports=Q()}),Vi=A(()=>{var t=Q();function e(n,s,o){this.type=n,this.varIndex=s,this.value=o}function r(n,s){this.relaxedEvaluation=n,this.cuts=s}function i(n,s){return s.relaxedEvaluation-n.relaxedEvaluation}t.prototype.applyCuts=function(n){if(this.restore(),this.addCutConstraints(n),this.simplex(),this.model.useMIRCuts)for(var s=!0;s;){var o=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var a=this.computeFractionalVolume(!0);a>=.9*o&&(s=!1)}},t.prototype.branchAndCut=function(){var n=[],s=0,o=this.model.tolerance,a=!0,h=1e99;this.model.timeout&&(h=Date.now()+this.model.timeout);for(var l=1/0,u=null,f=[],c=0;c<this.optionalObjectives.length;c+=1)f.push(1/0);var d=new r(-1/0,[]),y;for(n.push(d);n.length>0&&a===!0&&Date.now()<h;)if(this.model.isMinimization?y=this.bestPossibleEval*(1+o):y=this.bestPossibleEval*(1-o),o>0&&l<y&&(a=!1),d=n.pop(),!(d.relaxedEvaluation>l)){var v=d.cuts;if(this.applyCuts(v),s++,this.feasible!==!1){var b=this.evaluation;if(!(b>l)){if(b===l){for(var x=!0,m=0;m<this.optionalObjectives.length&&!(this.optionalObjectives[m].reducedCosts[0]>f[m]);m+=1)if(this.optionalObjectives[m].reducedCosts[0]<f[m]){x=!1;break}if(x)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,s===1){this.branchAndCutIterations=s;return}u=d,l=b;for(var g=0;g<this.optionalObjectives.length;g+=1)f[g]=this.optionalObjectives[g].reducedCosts[0]}else{s===1&&this.save();for(var w=this.getMostFractionalVar(),I=w.index,_=[],S=[],M=v.length,O=0;O<M;O+=1){var C=v[O];C.varIndex===I?C.type==="min"?S.push(C):_.push(C):(_.push(C),S.push(C))}var $=Math.ceil(w.value),k=Math.floor(w.value),B=new e("min",I,$);_.push(B);var T=new e("max",I,k);S.push(T),n.push(new r(b,_)),n.push(new r(b,S)),n.sort(i)}}}}u!==null&&this.applyCuts(u.cuts),this.branchAndCutIterations=s}}),Jo=A((t,e)=>{var r=Q();Vi();var i=ke(),n=i.Constraint,s=i.Equality,o=i.Variable,a=i.IntegerVariable;i.Term;function h(l,u){this.tableau=new r(l),this.name=u,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}e.exports=h,h.prototype.minimize=function(){return this.isMinimization=!0,this},h.prototype.maximize=function(){return this.isMinimization=!1,this},h.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var l=this.lastElementIndex;return this.lastElementIndex+=1,l},h.prototype._addConstraint=function(l){var u=l.slack;this.tableau.variablesPerIndex[u.index]=u,this.constraints.push(l),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(l)},h.prototype.smallerThan=function(l){var u=new n(l,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(u),u},h.prototype.greaterThan=function(l){var u=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(u),u},h.prototype.equal=function(l){var u=new n(l,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(u);var f=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(f),new s(u,f)},h.prototype.addVariable=function(l,u,f,c,d){if(typeof d=="string")switch(d){case"required":d=0;break;case"strong":d=1;break;case"medium":d=2;break;case"weak":d=3;break;default:d=0;break}var y=this.tableau.getNewElementIndex();u==null&&(u="v"+y),l==null&&(l=0),d==null&&(d=0);var v;return f?(v=new a(u,l,y,d),this.integerVariables.push(v)):v=new o(u,l,y,d),this.variables.push(v),this.tableau.variablesPerIndex[y]=v,c&&(this.unrestrictedVariables[y]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(v),v},h.prototype._removeConstraint=function(l){var u=this.constraints.indexOf(l);if(u===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(u,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(l),l.relaxation&&this.removeVariable(l.relaxation)},h.prototype.removeConstraint=function(l){return l.isEquality?(this._removeConstraint(l.upperBound),this._removeConstraint(l.lowerBound)):this._removeConstraint(l),this},h.prototype.removeVariable=function(l){var u=this.variables.indexOf(l);if(u===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(u,1),this.tableauInitialized===!0&&this.tableau.removeVariable(l),this},h.prototype.updateRightHandSide=function(l,u){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(l,u),this},h.prototype.updateConstraintCoefficient=function(l,u,f){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(l,u,f),this},h.prototype.setCost=function(l,u){var f=l-u.cost;return this.isMinimization===!1&&(f=-f),u.cost=l,this.tableau.updateCost(u,f),this},h.prototype.loadJson=function(l){this.isMinimization=l.opType!=="max";for(var u=l.variables,f=l.constraints,c={},d={},y=Object.keys(f),v=y.length,b=0;b<v;b+=1){var x=y[b],m=f[x],g=m.equal,w=m.weight,I=m.priority,_=w!==void 0||I!==void 0,S,M;if(g===void 0){var O=m.min;O!==void 0&&(S=this.greaterThan(O),c[x]=S,_&&S.relax(w,I));var C=m.max;C!==void 0&&(M=this.smallerThan(C),d[x]=M,_&&M.relax(w,I))}else{S=this.greaterThan(g),c[x]=S,M=this.smallerThan(g),d[x]=M;var $=new s(S,M);_&&$.relax(w,I)}}var k=Object.keys(u),B=k.length;this.tolerance=l.tolerance||0,l.timeout&&(this.timeout=l.timeout),l.options&&(l.options.timeout&&(this.timeout=l.options.timeout),this.tolerance===0&&(this.tolerance=l.options.tolerance||0),l.options.useMIRCuts&&(this.useMIRCuts=l.options.useMIRCuts),typeof l.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=l.options.exitOnCycles);for(var T=l.ints||{},F=l.binaries||{},V=l.unrestricted||{},P=l.optimize,tt=0;tt<B;tt+=1){var L=k[tt],ot=u[L],H=ot[P]||0,et=!!F[L],j=!!T[L]||et,Vt=!!V[L],G=this.addVariable(H,L,j,Vt);et&&this.smallerThan(1).addTerm(1,G);var U=Object.keys(ot);for(b=0;b<U.length;b+=1){var R=U[b];if(R!==P){var at=ot[R],X=c[R];X!==void 0&&X.addTerm(at,G);var pt=d[R];pt!==void 0&&pt.addTerm(at,G)}}}return this},h.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},h.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},h.prototype.isFeasible=function(){return this.tableau.feasible},h.prototype.save=function(){return this.tableau.save()},h.prototype.restore=function(){return this.tableau.restore()},h.prototype.activateMIRCuts=function(l){this.useMIRCuts=l},h.prototype.debug=function(l){this.checkForCycles=l},h.prototype.log=function(l){return this.tableau.log(l)}}),Ko=A(t=>{t.CleanObjectiveAttributes=function(e){var r,i,n;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){r=Math.random();for(i in e.variables)e.variables[i][e.optimize]&&(e.variables[i][r]=e.variables[i][e.optimize]);return e.constraints[r]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(n in e.optimize)if(e.constraints[n])if(e.constraints[n]==="equal")delete e.optimize[n];else{r=Math.random();for(i in e.variables)e.variables[i][n]&&(e.variables[i][r]=e.variables[i][n]);e.constraints[r]=e.constraints[n],delete e.constraints[n]}return e}}}),de=A((t,e)=>{function r(n){var s={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},o={opType:"",optimize:"_obj",constraints:{},variables:{}},a={">=":"min","<=":"max","=":"equal"},h="",l=null,u="",f="",c="",d=0;typeof n=="string"&&(n=n.split(`
`));for(var y=0;y<n.length;y++)if(c="__"+y,h=n[y],l=null,s.is_objective.test(h))o.opType=h.match(/(max|min)/gi)[0],l=h.match(s.parse_lhs).map(function(x){return x.replace(/\s+/,"")}).slice(1),l.forEach(function(x){u=x.match(s.get_num),u===null?x.substr(0,1)==="-"?u=-1:u=1:u=u[0],u=parseFloat(u),f=x.match(s.get_word)[0].replace(/\;$/,""),o.variables[f]=o.variables[f]||{},o.variables[f]._obj=u});else if(s.is_int.test(h))l=h.match(s.parse_int).slice(1),o.ints=o.ints||{},l.forEach(function(x){x=x.replace(";",""),o.ints[x]=1});else if(s.is_bin.test(h))l=h.match(s.parse_bin).slice(1),o.binaries=o.binaries||{},l.forEach(function(x){x=x.replace(";",""),o.binaries[x]=1});else if(s.is_constraint.test(h)){var v=h.indexOf(":"),b=v===-1?h:h.slice(v+1);l=b.match(s.parse_lhs).map(function(x){return x.replace(/\s+/,"")}),l.forEach(function(x){u=x.match(s.get_num),u===null?x.substr(0,1)==="-"?u=-1:u=1:u=u[0],u=parseFloat(u),f=x.match(s.get_word)[0],o.variables[f]=o.variables[f]||{},o.variables[f][c]=u}),d=parseFloat(h.match(s.parse_rhs)[0]),h=a[h.match(s.parse_dir)[0]],o.constraints[c]=o.constraints[c]||{},o.constraints[c][h]=d}else s.is_unrestricted.test(h)&&(l=h.match(s.parse_int).slice(1),o.unrestricted=o.unrestricted||{},l.forEach(function(x){x=x.replace(";",""),o.unrestricted[x]=1}));return o}function i(n){if(!n)throw new Error("Solver requires a model to operate on");var s="",o={max:"<=",min:">=",equal:"="},a=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(n.opType){s+=n.opType+":";for(var h in n.variables)n.variables[h][h]=n.variables[h][h]?n.variables[h][h]:1,n.variables[h][n.optimize]&&(s+=" "+n.variables[h][n.optimize]+" "+h.replace(a,"_"))}else s+="max:";s+=`;

`;for(var l in n.constraints)for(var u in n.constraints[l])if(typeof o[u]<"u"){for(var f in n.variables)typeof n.variables[f][l]<"u"&&(s+=" "+n.variables[f][l]+" "+f.replace(a,"_"));s+=" "+o[u]+" "+n.constraints[l][u],s+=`;
`}if(n.ints){s+=`

`;for(var c in n.ints)s+="int "+c.replace(a,"_")+`;
`}if(n.unrestricted){s+=`

`;for(var d in n.unrestricted)s+="unrestricted "+d.replace(a,"_")+`;
`}return s}e.exports=function(n){return n.length?r(n):i(n)}}),Qo=A(t=>{t.reformat=de();function e(r){return r=r.replace("\\r\\n",`\r
`),r=r.split(`\r
`),r=r.filter(function(i){var n;return n=new RegExp(" 0$","gi"),!(n.test(i)===!0||(n=new RegExp("\\d$","gi"),n.test(i)===!1))}).map(function(i){return i.split(/\:{0,1} +(?=\d)/)}).reduce(function(i,n,s){return i[n[0]]=n[1],i},{}),r}t.solve=function(r){return new Promise(function(i,n){typeof window<"u"&&n("Function Not Available in Browser");var s=de()(r);r.external||n("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),r.external.binPath||n("No Executable | Binary path provided in arguments as 'binPath'"),r.external.args||n("No arguments array for cli | bash provided on 'args' attribute"),r.external.tempName||n("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var o=Ye("fs");o.writeFile(r.external.tempName,s,function(a,h){if(a)n(a);else{var l=Ye("child_process").execFile;r.external.args.push(r.external.tempName),l(r.external.binPath,r.external.args,function(u,f){if(u)if(u.code===1)i(e(f));else{var c={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},d={code:u.code,meaning:c[u.code],data:f};n(d)}else i(e(f))})}})})}}),ta=A((t,e)=>{e.exports={lpsolve:Qo()}}),We=A((t,e)=>{e.exports=function(r,i){var n=i.optimize,s=JSON.parse(JSON.stringify(i.optimize)),o=Object.keys(i.optimize),a,h=0,l={},u="",f={},c=[],d,y,v,b;for(delete i.optimize,d=0;d<o.length;d++)s[o[d]]=0;for(d=0;d<o.length;d++){i.optimize=o[d],i.opType=n[o[d]],a=r.Solve(i,void 0,void 0,!0);for(b in o)if(!i.variables[o[b]]){a[o[b]]=a[o[b]]?a[o[b]]:0;for(v in i.variables)i.variables[v][o[b]]&&a[v]&&(a[o[b]]+=a[v]*i.variables[v][o[b]])}for(u="base",y=0;y<o.length;y++)a[o[y]]?u+="-"+(a[o[y]]*1e3|0)/1e3:u+="-0";if(!l[u]){for(l[u]=1,h++,y=0;y<o.length;y++)a[o[y]]&&(s[o[y]]+=a[o[y]]);delete a.feasible,delete a.result,c.push(a)}}for(d=0;d<o.length;d++)i.constraints[o[d]]={equal:s[o[d]]/h};i.optimize="cheater-"+Math.random(),i.opType="max";for(d in i.variables)i.variables[d].cheater=1;for(d in c)for(v in c[d])f[v]=f[v]||{min:1e99,max:-1e99};for(d in f)for(v in c)c[v][d]?(c[v][d]>f[d].max&&(f[d].max=c[v][d]),c[v][d]<f[d].min&&(f[d].min=c[v][d])):(c[v][d]=0,f[d].min=0);return a=r.Solve(i,void 0,void 0,!0),{midpoint:a,vertices:c,ranges:f}}}),Ee=A((t,e)=>{var r=Zo(),i=Jo(),n=Vi(),s=ke(),o=Ko(),a=s.Constraint,h=s.Variable,l=s.Numeral,u=s.Term,f=ta(),c=function(){this.Model=i,this.branchAndCut=n,this.Constraint=a,this.Variable=h,this.Numeral=l,this.Term=u,this.Tableau=r,this.lastSolvedModel=null,this.External=f,this.Solve=function(d,y,v,b){if(b)for(var x in o)d=o[x](d);if(!d)throw new Error("Solver requires a model to operate on");if(typeof d.optimize=="object"&&Object.keys(d.optimize>1))return We()(this,d);if(d.external){var m=Object.keys(f);if(m=JSON.stringify(m),!d.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+m);if(!f[d.external.solver])throw new Error("No support (yet) for "+d.external.solver+". Please use one of these instead:"+m);return f[d.external.solver].solve(d)}else{d instanceof i||(d=new i(y).loadJson(d));var g=d.solve();if(this.lastSolvedModel=d,g.solutionSet=g.generateSolutionSet(),v)return g;var w={};return w.feasible=g.feasible,w.result=g.evaluation,w.bounded=g.bounded,g._tableau.__isIntegral&&(w.isIntegral=!0),Object.keys(g.solutionSet).forEach(function(I){g.solutionSet[I]!==0&&(w[I]=g.solutionSet[I])}),w}},this.ReformatLP=de(),this.MultiObjective=function(d){return We()(this,d)}};typeof define=="function"?define([],function(){return new c}):typeof window=="object"?window.solver=new c:typeof self=="object"&&(self.solver=new c),e.exports=new c}),ea=A((t,e)=>{var r=function(n,s){return n<s};function i(n){if(!(this instanceof i))return new i(n);this.array=[],this.size=0,this.compare=n||r}i.prototype.clone=function(){var n=new i(this.compare);return n.size=this.size,n.array=this.array.slice(0,this.size),n},i.prototype.add=function(n){var s=this.size;this.array[this.size]=n,this.size+=1;for(var o,a;s>0&&(o=s-1>>1,a=this.array[o],!!this.compare(n,a));)this.array[s]=a,s=o;this.array[s]=n},i.prototype.heapify=function(n){this.array=n,this.size=n.length;var s;for(s=this.size>>1;s>=0;s--)this._percolateDown(s)},i.prototype._percolateUp=function(n,s){for(var o=this.array[n],a,h;n>0&&(a=n-1>>1,h=this.array[a],!(!s&&!this.compare(o,h)));)this.array[n]=h,n=a;this.array[n]=o},i.prototype._percolateDown=function(n){for(var s=this.size,o=this.size>>>1,a=this.array[n],h,l,u;n<o&&(h=(n<<1)+1,l=h+1,u=this.array[h],l<s&&this.compare(this.array[l],u)&&(h=l,u=this.array[l]),!!this.compare(u,a));)this.array[n]=u,n=h;this.array[n]=a},i.prototype._removeAt=function(n){if(!(n>this.size-1||n<0))return this._percolateUp(n,!0),this.poll()},i.prototype.remove=function(n){for(var s=0;s<this.size;s++)if(!this.compare(this.array[s],n)&&!this.compare(n,this.array[s]))return this._removeAt(s),!0;return!1},i.prototype.removeOne=function(n){if(typeof n=="function"){for(var s=0;s<this.size;s++)if(n(this.array[s]))return this._removeAt(s)}},i.prototype.removeMany=function(n,s){if(typeof n!="function"||this.size<1)return[];s=s?Math.min(s,this.size):this.size;for(var o=0,a=new Array(s),h=0,l=new Array(this.size);o<s&&!this.isEmpty();){var u=this.poll();n(u)?a[o++]=u:l[h++]=u}a.length=o;for(var f=0;f<h;)this.add(l[f++]);return a},i.prototype.peek=function(){if(this.size!=0)return this.array[0]},i.prototype.poll=function(){if(this.size!=0){var n=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,n}},i.prototype.replaceTop=function(n){if(this.size!=0){var s=this.array[0];return this.array[0]=n,this._percolateDown(0),s}},i.prototype.trim=function(){this.array=this.array.slice(0,this.size)},i.prototype.isEmpty=function(){return this.size===0},i.prototype.forEach=function(n){if(!(this.isEmpty()||typeof n!="function"))for(var s=0,o=this.clone();!o.isEmpty();)n(o.poll(),s++)},i.prototype.kSmallest=function(n){if(this.size==0)return[];n=Math.min(this.size,n);var s=new i(this.compare);let o=Math.min((n>0?Math.pow(2,n-1):0)+1,this.size);s.size=o,s.array=this.array.slice(0,o);for(var a=new Array(n),h=0;h<n;h++)a[h]=s.poll();return a},e.exports=i}),Tt=xt(Ao()),ia=class{constructor(t){this.base=t}[Symbol.iterator](){return this.base[Symbol.iterator]()}*gconcat(...t){yield*this;for(let e of t)yield*e}concat(...t){return z(this.gconcat(...t))}*gentries(){let t=0;for(let e of this)yield[t++,e]}entries(){return z(this.gentries())}every(t){return!this.some((e,r)=>!t(e,r))}fill(t){return this.map(()=>t)}*gfilter(t){for(let[e,r]of this.gentries())t(r,e)&&(yield r)}filter(t){return z(this.gfilter(t))}find(t){return this.filter(t).shift()}findIndex(t){for(let[e,r]of this.gentries())if(t(r,e))return e;return-1}*gflatMap(t){for(let[e,r]of this.gentries())yield*t(r,e)}flatMap(t){return z(this.gflatMap(t))}forEach(t){for(let[e,r]of this.gentries())t(r,e)}includes(t,e=0){return this.indexOf(t,e)>=0}indexOf(t,e=0){if(e<0){let r=0,i=new Tt.default;for(let s of this)r>=-e&&i.shift(),i.push(s),r++;let n=i.toArray().indexOf(t);return n===-1?-1:n+r+e}else{for(let[r,i]of this.gentries())if(r>=e&&i===t)return r;return-1}}join(t=","){return[...this].join(t)}*gkeys(){let t=0;for(let e of this)yield t++}keys(){return z(this.gkeys())}lastIndexOf(t,e=1/0){let r=-1;if(e<0){let i=new Tt.default;for(let[n,s]of this.gentries()){s===t&&i.push(n);let o=i.peekFront();o!==void 0&&o<=n+e+1&&(i.shift(),r=o)}}else for(let[i,n]of this.gentries())i<=e&&n===t&&(r=i);return r}get length(){return this.reduce(t=>t+1,0)}*gmap(t){for(let[e,r]of this.gentries())yield t(r,e)}map(t){return z(this.gmap(t))}pop(){let t;for(t of this);return t}push(...t){return this.concat(t)}reduce(t,e){if(e===void 0){let r=t,i=!0,n;for(let[s,o]of this.gentries())i?(n=o,i=!1):n=r(n,o,s);if(i)throw new TypeError("Reduce of empty iterable with no initial value");return n}else{let r=t,i=e;for(let[n,s]of this.gentries())i=r(i,s,n);return i}}reverse(){return z([...this].reverse())}shift(){for(let t of this)return t}*gslice(t,e){for(let[r,i]of this.gentries()){if(r>=e)break;r>=t&&(yield i)}}*gnegslice(t,e){let r=new Tt.default,i=t-e;for(let[n,s]of this.gentries())n>=i?(yield r.shift(),r.push(s)):n>=t&&r.push(s)}slice(t=0,e=1/0){if(t<0){let r=0,i=new Tt.default;for(let o of this)r>=-t&&i.shift(),i.push(o),r++;let n=i.toArray(),s=e-r-t;return e<0?z(n.slice(0,e)):s>0?z(n.slice(0,s)):z()}else return e<0?z(this.gnegslice(t,e)):z(this.gslice(t,e))}some(t){for(let[e,r]of this.gentries())if(t(r,e))return!0;return!1}sort(t){return z([...this].sort(t))}*gsplice(t,e,...r){for(let[i,n]of this.gentries())i===t&&(yield*r),(i<t||i>=t+e)&&(yield n)}splice(t,e=0,...r){return z(this.gsplice(t,e,...r))}unshift(...t){return z(t).concat(this)}values(){return this}};function z(t=[]){return new ia(t)}function N(t){if(t!==void 0)return t;throw new Error("internal error: got unexpected undefined value")}function st(t){if(!t)throw new Error("internal error: failed assert")}function ra(t,e){e.size<t.size&&([e,t]=[t,e]);for(let r of t)if(e.has(r))return!0;return!1}function na(){let t=new WeakSet;return(e,r)=>{if(typeof r=="object"&&r!==null){if(t.has(r))return"[circular]";t.add(r)}return r}}function J(t,...e){let[r,...i]=t;return[r].concat(...i.map((n,s)=>[JSON.stringify(e[s],na()),n])).join("")}function*dt(t){let[e,...r]=t;for(let i of r)yield[e,i],e=i}function*pe(t,...e){let r=new Set,i;for(;i=e.pop();)r.has(i)||(yield i,r.add(i),e.push(...t(i)))}var ie=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r},Ai=class{constructor(t,e,r=[]){this.child=t,this.data=e,this.points=r}},sa=class{constructor(t,e,r,i){this.source=t,this.target=e,this.data=r,this.points=i}},Nt=class{constructor(t){t&&(this.proots=t)}[Symbol.iterator](){return this.idescendants()[Symbol.iterator]()}iroots(){return z(N(this.proots))}roots(){return[...this.iroots()]}*gdepth(){yield*pe(t=>t.ichildren(),...this.iroots())}*gbreadth(){let t=new Set,e=this.roots(),r=[];do{r=e.reverse(),e=[];let i;for(;i=r.pop();)t.has(i)||(t.add(i),yield i,e.push(...i.ichildren()))}while(e.length)}*gbefore(){let t=new Map;for(let i of this)for(let n of i.ichildren())t.set(n,(t.get(n)||0)+1);let e=this.roots(),r;for(;r=e.pop();){yield r;for(let i of r.ichildren()){let n=N(t.get(i));n>1?t.set(i,n-1):e.push(i)}}}*gafter(){let t=this.roots(),e=new Set,r;for(;r=t.pop();)e.has(r)||(r.ichildren().every(i=>e.has(i))?(e.add(r),yield r):(t.push(r),t.push(...r.ichildren())))}idescendants(t="depth"){if(t==="depth")return z(this.gdepth());if(t==="breadth")return z(this.gbreadth());if(t==="before")return z(this.gbefore());if(t==="after")return z(this.gafter());throw new Error(`unknown iteration style: ${t}`)}descendants(t="depth"){return[...this.idescendants(t)]}ilinks(){return this.idescendants().flatMap(t=>t.ichildLinks())}links(){return[...this.ilinks()]}size(){return this.idescendants().reduce(t=>t+1,0)}sum(t){let e=new Map;for(let[r,i]of this.idescendants("after").entries()){let n=t(i,r),s=new Map;s.set(i,n);for(let o of i.ichildren()){let a=N(e.get(o));for(let[h,l]of a.entries())s.set(h,l)}i.value=z(s.values()).reduce((o,a)=>o+a),e.set(i,s)}return this}count(){let t=new Map;for(let e of this.idescendants("after"))if(e.ichildren()[Symbol.iterator]().next().done)t.set(e,new Set([e])),e.value=1;else{let r=new Set;for(let i of e.ichildren()){let n=N(t.get(i));for(let s of n)r.add(s)}t.set(e,r),e.value=r.size}return this}height(){for(let t of this.idescendants("after"))t.value=Math.max(0,...t.ichildren().map(e=>N(e.value)+1));return this}depth(){let t=new Map;for(let e of this)for(let r of e.ichildren()){let i=t.get(r);i?i.push(e):t.set(r,[e])}for(let e of this.idescendants("before"))e.value=Math.max(0,...(t.get(e)||[]).map(r=>N(r.value)+1));return this}*gsplit(){let t=new Map;for(let i of this)for(let n of i.ichildren()){let s=t.get(n);s?s.push(i):t.set(n,[i])}function*e(i){yield*i.ichildren(),yield*t.get(i)||[]}let r=new Set(this.iroots());for(let i of this.iroots()){if(!r.delete(i))continue;let n=[i];for(let s of pe(e,i))r.delete(s)&&n.push(s);yield n.length>1?new Nt(n):n[0]}}isplit(){return z(this.gsplit())}split(){return[...this.isplit()]}connected(){let t=this.isplit()[Symbol.iterator](),{done:e}=t.next();return st(!e),{done:e}=t.next(),!!e}},zi=class extends Nt{constructor(t){super(),this.data=t,this.dataChildren=[]}iroots(){return z([this])}*gchildren(){for(let{child:t}of this.dataChildren)yield t}ichildren(){return z(this.gchildren())}children(){return[...this.ichildren()]}*gchildLinks(){for(let{child:t,data:e,points:r}of this.dataChildren)yield new sa(this,t,e,r)}ichildLinks(){return z(this.gchildLinks())}childLinks(){return[...this.ichildLinks()]}isplit(){return z([this])}split(){return[this]}connected(){return!0}};function oa(t){if(typeof t!="string")throw new Error(`id is supposed to be string but got type ${typeof t}`);return t}function Ri(t){if(!t.length)throw new Error("dag contained no roots; this often indicates a cycle");for(let s of new Nt(t))if(new Set(s.ichildren()).size!==s.ichildren().length)throw new Error(J`node '${s.data}' contained duplicate children`);let e=new Set,r=new Set,i=null;function n(s){if(e.has(s))return[];if(r.has(s))return i=s,[s];{r.add(s);let o=[];for(let a of s.ichildren())if(o=n(a),o.length)break;return r.delete(s),e.add(s),o.length&&i!==null&&o.push(s),i===s&&(i=null),o}}for(let s of t){let o=n(s);if(o.length){let a=o.reverse().map(({data:h})=>J`'${h}'`).join(" -> ");throw new Error(`dag contained a cycle: ${a}`)}}}function Dt(t){function e(...s){if(!s.length)throw new Error("must pass in at least one node");let o=new Map,a=[];function h(y){let v=o.get(y);return v===void 0&&(v=new zi(y),o.set(y,v),a.push(v)),v}let l=s.map(h),u,f=0;for(;u=a.pop();)u.dataChildren=(t.childrenData(u.data,f++)||[]).map(([y,v])=>new Ai(h(y),v));let c=new Set(l);for(let y of o.values())for(let v of y.ichildren())if(c.delete(v)&&t.roots)throw new Error(J`node '${y.data}' pointed to a root`);let d=c.size&&c.size!==l.length?[...c]:l;return Ri(d),d.length>1?new Nt(d):d[0]}function r(s){return s===void 0?t.children:Dt({children:s,childrenData:Ti(s),roots:t.roots})}e.children=r;function i(s){return s===void 0?t.childrenData:Dt({children:aa(s),childrenData:s,roots:t.roots})}e.childrenData=i;function n(s){return s===void 0?t.roots:Dt(Object.assign(Object.assign({},t),{roots:s}))}return e.roots=n,e}function Ti(t){function e(r,i){return(t(r,i)||[]).map(n=>[n,void 0])}return e.wrapped=t,e}function aa(t){function e(r,i){return(t(r,i)||[]).map(([n])=>n)}return e.wrapped=t,e}function la(t){try{let e=t.children;return e===void 0||e instanceof Array}catch{return!1}}function Ge(t){if(la(t))return t.children;throw new Error(J`default children function expected datum to have a children field but got: ${t}`)}function ha(...t){if(t.length)throw new Error(`got arguments to hierarchy(${t}), but constructor takes no aruguments. These were probably meant as data which should be called as hierarchy()(...)`);return Dt({children:Ge,childrenData:Ti(Ge),roots:!0})}function qt(t){function e(s){if(!s.length)throw new Error("can't stratify empty data");let o=new Map;for(let[h,l]of s.entries()){let u=oa(t.id(l,h)),f=t.parentData(l,h)||[],c=new zi(l);if(o.has(u))throw new Error(`found a duplicate id: ${r}`);o.set(u,[c,f])}let a=[];for(let[h,l]of o.values()){for(let[u,f]of l){let c=o.get(u);if(!c)throw new Error(`missing id: ${u}`);let[d]=c;d.dataChildren.push(new Ai(h,f))}l.length||a.push(h)}return Ri(a),a.length>1?new Nt(a):a[0]}function r(s){if(s===void 0)return t.id;{let o=ie(t,["id"]);return qt(Object.assign(Object.assign({},o),{id:s}))}}e.id=r;function i(s){if(s===void 0)return t.parentData;{let o=ie(t,["parentIds","parentData"]);return qt(Object.assign(Object.assign({},o),{parentIds:ua(s),parentData:s}))}}e.parentData=i;function n(s){if(s===void 0)return t.parentIds;{let o=ie(t,["parentIds","parentData"]);return qt(Object.assign(Object.assign({},o),{parentIds:s,parentData:Pi(s)}))}}return e.parentIds=n,e}function Pi(t){function e(r,i){return(t(r,i)||[]).map(n=>[n,void 0])}return e.wrapped=t,e}function ua(t){function e(r,i){return(t(r,i)||[]).map(([n])=>n)}return e.wrapped=t,e}function fa(t){try{return typeof t.id=="string"}catch{return!1}}function ca(t){if(fa(t))return t.id;throw new Error(J`default id function expected datum to have an id field but got '${t}'`)}function da(t){try{let e=t.parentIds;return e===void 0||e instanceof Array&&e.every(r=>typeof r=="string")}catch{return!1}}function Ze(t){if(da(t))return t.parentIds;throw new Error(`default parentIds function expected datum to have a parentIds field but got: ${t}`)}function pa(...t){if(t.length)throw new Error(`got arguments to stratify(${t}), but constructor takes no aruguments. These were probably meant as data which should be called as stratify()(...)`);return qt({id:ca,parentIds:Ze,parentData:Pi(Ze)})}function va(t){if(t.value===void 0)throw new Error(J`node with data '${t.data}' did not get a defined value during layering`);if(t.value<0)throw new Error(J`node with data '${t.data}' got an invalid (negative) value during layering: ${t.value}`);return t.value}function ya(t){let e=new Map(t.idescendants().map(s=>[s,{node:s,layer:va(s)}]));function r(s){let o=s.layer+1,a="node"in s?s.node.children():[s.target],h="node"in s?s.node:s.source;return a.map(l=>{let u=N(e.get(l));if(u.layer<o)throw new Error(J`layering left child data '${l.data}' (${l.value}) with greater or equal layer to parent data '${h.data}' (${h.value})`);return u.layer===o?u:{source:h,target:l,layer:o}})}let i=ha().children(r)(...t.iroots().map(s=>N(e.get(s)))),n=[];for(let s of i)(n[s.data.layer]||(n[s.data.layer]=[])).push(s);if(!n[0]||!n[0].length)throw new Error("no nodes were assigned to layer 0");for(let s of n)st(s&&s.length);return n}var _a=xt(Do());function ga(t,e,r,i,n){if(!e.length)return[];let s=[[0]],o=[0],a=[[0]],h=[0];for(let f of t){let c=[0];c.push(...f),s.push(c)}o.push(...e),a.push(...e.map(()=>[0]));for(let f of r)for(let[c,d]of f.entries())a[c+1].push(-d);h.push(...i.map(f=>-f));let{solution:l,message:u}=(0,_a.solveQP)(s,o,a,h,n);return st(!u.length),l.shift(),l}function ma(t,e,r,i,n=0){e.pop(),t.pop(),t.forEach(o=>o.pop()),r.forEach(o=>o.pop());let s=ga(t,e,r,i,n);return s.push(0),s}function xa(t){return new Map(t.flatMap(e=>e).map((e,r)=>[e,r]))}function wa(t,e,r){let i=1+Math.max(...e.values()),n=[],s=[];for(let a of t)for(let[h,l]of dt(a)){let u=N(e.get(h)),f=N(e.get(l)),c=new Array(i).fill(0);c[u]=1,c[f]=-1,n.push(c),s.push(-(r(h)+r(l))/2)}let o=new Array(i).fill(0);return[[...new Array(i)].map(()=>new Array(i).fill(0)),o,n,s]}function Je(t,e,r,i){t[r][r]+=i,t[r][e]-=i,t[e][r]-=i,t[e][e]+=i}function ba(t,e,r,i,n){t[i][i]+=n,t[i][r]-=2*n,t[i][e]+=n,t[r][i]-=2*n,t[r][r]+=4*n,t[r][e]-=2*n,t[e][i]+=n,t[e][r]-=2*n,t[e][e]+=n}function Ia(t,e,r,i){let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(let o of t){let a=o[0],h=o[o.length-1];n=Math.min(n,i[N(r.get(a))]-e(a)/2),s=Math.max(s,i[N(r.get(h))]+e(h)/2)}for(let o of t)for(let a of o)a.x=i[N(r.get(a))]-n;return s-n}function Ma(t){let e=new Map;for(let s of t)for(let o of s)for(let a of o.ichildren()){let h=e.get(a);h?h.push(o):e.set(a,[o])}function*r(s){yield*s.ichildren(),yield*e.get(s)||[]}let i=0,n=new Map;for(let s of t)for(let o of s)if(!n.has(o)){for(let a of pe(r,o))n.set(a,i);i++}return n}function Ca(t,e){let r=[],i=[],n=new Set;for(let s of t){let o=new Set(s.map(a=>N(e.get(a))));ra(n,o)||r.push(i=[]),i.push(s),n=o}return r}function Lt(t){function e(o,a,h){let{vertNode:l,vertDummy:u,curveNode:f,curveDummy:c,comp:d}=t,y=xa(o),[v,b,x,m]=wa(o,y,a);for(let w of o)for(let I of w){let _=N(y.get(I)),S="node"in I.data?l:u;for(let M of I.ichildren()){let O=N(y.get(M)),C="node"in M.data?l:u,$="node"in M.data?f:c;Je(v,_,O,S+C);for(let k of M.ichildren()){let B=N(y.get(k));ba(v,_,O,B,$)}}}for(let w of o)for(let[I,_]of dt(w))N(h.get(I))!==N(h.get(_))&&Je(v,N(y.get(I)),N(y.get(_)),d);let g=ma(v,b,x,m);return Ia(o,a,y,g)}function r(o,a){let{vertNode:h,vertDummy:l,curveNode:u,curveDummy:f}=t;if(h===0&&u===0)throw new Error("node vertical weight or node curve weight needs to be positive");if(l===0&&f===0)throw new Error("dummy vertical weight or dummy curve weight needs to be positive");let c=Ma(o),d=Ca(o,c),y=d.map(b=>e(b,a,c)),v=Math.max(...y);if(v<=0)throw new Error("must assign nonzero width to at least one node");for(let[b,x]of d.entries()){let m=(v-y[b])/2;for(let g of x)for(let w of g)w.x=N(w.x)+m}return v}function i(o){if(o===void 0){let{vertNode:l,vertDummy:u}=t;return[l,u]}let[a,h]=o;if(a<0||h<0)throw new Error(`weights must be non-negative, but were ${a} and ${h}`);return Lt(Object.assign(Object.assign({},t),{vertNode:a,vertDummy:h}))}r.vertical=i;function n(o){if(o===void 0){let{curveNode:l,curveDummy:u}=t;return[l,u]}let[a,h]=o;if(a<0||h<0)throw new Error(`weights must be non-negative, but were ${a} and ${h}`);return Lt(Object.assign(Object.assign({},t),{curveNode:a,curveDummy:h}))}r.curve=n;function s(o){if(o===void 0)return t.comp;if(o<=0)throw new Error(`weight must be positive, but was ${o}`);return Lt(Object.assign(Object.assign({},t),{comp:o}))}return r.component=s,r}function ka(...t){if(t.length)throw new Error(`got arguments to quad(${t}), but constructor takes no aruguments.`);return Lt({vertNode:1,vertDummy:0,curveNode:0,curveDummy:1,comp:1})}var Ea=xt(Ee()),re=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r};function ve(t){function e(n){let s={},o={},a={},h=new Map(n.idescendants().entries().map(([g,w])=>[w,g.toString()]));function l(g){return N(h.get(g))}function u(g){return s[l(g)]}function f(g,w,I,_=!0){let S=u(w),M=u(I),O=`${g}: ${N(l(w))} -> ${N(l(I))}`;a[O]={min:+_},S[O]=-1,M[O]=1}function c(g,w,I){f(`${g} before`,w,I,!1),f(`${g} after`,I,w,!1)}let d=[],y=new Map;for(let g of n){let w=l(g);o[w]=1,s[w]={opt:g.children.length};let I=t.rank(g);I!==void 0&&d.push([I,g]);let _=t.group(g);if(_!==void 0){let S=y.get(_);S?S.push(g):y.set(_,[g])}}for(let g of n.ilinks())f("link",g.source,g.target),++u(g.source).opt,--u(g.target).opt;let v=d.sort(([g],[w])=>g-w);for(let[[g,w],[I,_]]of dt(v))g<I?f("rank",w,_):c("rank",w,_);for(let g of y.values())for(let[w,I]of dt(g))c("group",w,I);let b=Ea.Solve.call({},{optimize:"opt",opType:"max",constraints:a,variables:s,ints:o}),{feasible:x}=b,m=re(b,["feasible"]);if(!x)throw st(d.length||y.size),new Error("could not find a feasbile simplex layout, check that rank or group accessors are not ill-defined");for(let g of n)g.value=m[l(g)]||0}function r(n){if(n===void 0)return t.rank;{let s=re(t,["rank"]);return ve(Object.assign(Object.assign({},s),{rank:n}))}}e.rank=r;function i(n){if(n===void 0)return t.group;{let s=re(t,["group"]);return ve(Object.assign(Object.assign({},s),{group:n}))}}return e.group=i,e}function Ke(){}function Oa(...t){if(t.length)throw new Error(`got arguments to simplex(${t}), but constructor takes no aruguments.`);return ve({rank:Ke,group:Ke})}function Ba(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function*$a(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&(yield i)}}function Qe(t,e){let r;if(e===void 0)for(let i of t)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of t)(n=e(n,++i,t))!=null&&(r<n||r===void 0&&n>=n)&&(r=n)}return r}function ti(t,e){let r;if(e===void 0)for(let i of t)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of t)(n=e(n,++i,t))!=null&&(r>n||r===void 0&&n>=n)&&(r=n)}return r}function ji(t,e,r=0,i=t.length-1,n=Ba){for(;i>r;){if(i-r>600){let h=i-r+1,l=e-r+1,u=Math.log(h),f=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*f*(h-f)/h)*(l-h/2<0?-1:1),d=Math.max(r,Math.floor(e-l*f/h+c)),y=Math.min(i,Math.floor(e+(h-l)*f/h+c));ji(t,e,d,y,n)}let s=t[e],o=r,a=i;for(bt(t,r,e),n(t[i],s)>0&&bt(t,r,i);o<a;){for(bt(t,o,a),++o,--a;n(t[o],s)<0;)++o;for(;n(t[a],s)>0;)--a}n(t[r],s)===0?bt(t,r,a):(++a,bt(t,a,i)),a<=e&&(r=a+1),e<=a&&(i=a-1)}return t}function bt(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}function Sa(t,e,r){if(t=Float64Array.from($a(t,r)),!!(i=t.length)){if((e=+e)<=0||i<2)return ti(t);if(e>=1)return Qe(t);var i,n=(i-1)*e,s=Math.floor(n),o=Qe(ji(t,s).subarray(0,s+1)),a=ti(t.subarray(s+1));return o+(a-o)*(n-s)}}function Na(t,e){return Sa(t,.5,e)}var Va=class{constructor(){this.vals=[]}add(t){this.vals.push(t)}val(){return Na(this.vals)}},Aa=()=>new Va;function za(t,e){let r=t();for(let i of e)r.add(i);return r.val()}function ei(t,e){let r=new Map;for(let u of t){let f=e.get(u);if(f===void 0)continue;let c=r.get(f);c===void 0?r.set(f,[u]):c.push(u)}let i=[...r.entries()].sort(([u],[f])=>u-f).flatMap(([,u])=>u),n=new Map(t.map((u,f)=>[u,f])),s=t.filter(u=>e.get(u)===void 0),o=new Array(s.length).fill(null);function a(u,f,c,d){if(f<=u)return;let y=Math.floor((u+f)/2),v=s[y],b=N(n.get(v)),x=0,m=[x];for(let w=c;w<d;++w)x+=N(n.get(i[w]))<b?-1:1,m.push(x);let g=c+m.indexOf(Math.min(...m));o[y]=g,a(u,y,c,g),a(y+1,f,g,d)}a(0,s.length,0,i.length),o.push(i.length+1);let h=0,l=0;for(let[u,f]of i.entries()){for(;o[l]==u;)t[h++]=s[l++];t[h++]=f}for(;o[l]==i.length;)t[h++]=s[l++]}function Fi({factory:t}){function e(i,n,s){if(s){let o=new Map(n.map(h=>[h,t()]));for(let[h,l]of i.entries())for(let u of l.ichildren())N(o.get(u)).add(h);let a=new Map([...o.entries()].map(([h,l])=>[h,l.val()]));ei(n,a)}else{let o=new Map(n.map((h,l)=>[h,l])),a=new Map(i.map(h=>{let l=za(t,h.ichildren().map(u=>N(o.get(u))));return[h,l]}));ei(i,a)}}function r(i){return i===void 0?t:Fi({factory:i})}return e.aggregator=r,e}function Ra(...t){if(t.length)throw new Error(`got arguments to agg(${t}), but constructor takes no aruguments.`);return Fi({factory:Aa})}var Ta=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r};function ye(t){function e(n){let s=n.slice().reverse(),o=!0;for(let a=0;a<t.passes&&o;++a){o=!1;for(let[h,l]of dt(n)){let u=new Map(l.map((f,c)=>[f,c]));t.order(h,l,!0),l.some((f,c)=>N(u.get(f))!==c)&&(o=!0)}for(let[h,l]of dt(s)){let u=new Map(l.map((f,c)=>[f,c]));t.order(l,h,!1),l.some((f,c)=>N(u.get(f))!==c)&&(o=!0)}}}function r(n){if(n===void 0)return t.order;{let s=Ta(t,["order"]);return ye(Object.assign(Object.assign({},s),{order:n}))}}e.order=r;function i(n){if(n===void 0)return t.passes;if(n<=0)throw new Error("number of passes must be positive");return ye(Object.assign(Object.assign({},t),{passes:n}))}return e.passes=i,e}function Pa(...t){if(t.length)throw new Error(`got arguments to twoLayer(${t}), but constructor takes no aruguments.`);return ye({order:Ra(),passes:1})}var It=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r};function Di(t){let e=t();function r(i){return"node"in i.data?t(i.data.node):e}return r.wrapped=t,r}function ja(t){let e=new Map;function r(i){let n=e.get(i);if(n===void 0){n=t(i);let[s,o]=n;if(s<0||o<0)throw new Error(J`all node sizes must be non-negative, but got width ${s} and height ${o} for node '${i}'`);e.set(i,n)}return n}return[i=>r(i)[0],i=>r(i)[1]]}function ht(t){function e(h){t.layering(h);let l=ya(h),[u,f]=ja(t.sugiNodeSize),c=0;for(let y of l){let v=Math.max(...y.map(f));for(let b of y)b.y=c+v/2;c+=v}if(c<=0)throw new Error("at least one node must have positive height, but total height was zero");t.decross(l);let d=t.coord(l,u);for(let y of l)for(let v of y){if(v.x===void 0)throw new Error(J`coord didn't assign an x to node '${v}'`);if(v.x<0||v.x>d)throw new Error(`coord assgined an x (${v.x}) outside of [0, ${d}]`)}if(t.size!==null){let[y,v]=t.size;for(let b of l)for(let x of b)st(x.x!==void 0&&x.y!==void 0),x.x*=y/d,x.y*=v/c;d=y,c=v}for(let y of l)for(let v of y){if(st(v.x!==void 0&&v.y!==void 0),"target"in v.data)continue;v.data.node.x=v.x,v.data.node.y=v.y;let b=new Map(v.data.node.ichildLinks().map(({points:x,target:m})=>[m,x]));for(let x of v.ichildren()){let m=[{x:v.x,y:v.y}];for(;"target"in x.data;)st(x.x!==void 0&&x.y!==void 0),m.push({x:x.x,y:x.y}),[x]=x.ichildren();st(x.x!==void 0&&x.y!==void 0),m.push({x:x.x,y:x.y});let g=N(b.get(x.data.node));g.splice(0,g.length,...m)}}return{width:d,height:c}}function r(h){if(h===void 0)return t.layering;{let l=It(t,["layering"]);return ht(Object.assign(Object.assign({},l),{layering:h}))}}e.layering=r;function i(h){if(h===void 0)return t.decross;{let l=It(t,["decross"]);return ht(Object.assign(Object.assign({},l),{decross:h}))}}e.decross=i;function n(h){if(h===void 0)return t.coord;{let l=It(t,["coord"]);return ht(Object.assign(Object.assign({},l),{coord:h}))}}e.coord=n;function s(h){return h!==void 0?ht(Object.assign(Object.assign({},t),{size:h})):t.size}e.size=s;function o(h){if(h!==void 0){let l=It(t,["nodeSize","sugiNodeSize"]);return ht(Object.assign(Object.assign({},l),{nodeSize:h,sugiNodeSize:Di(h)}))}else return t.nodeSize}e.nodeSize=o;function a(h){if(h!==void 0){let l=It(t,["sugiNodeSize","nodeSize"]);return ht(Object.assign(Object.assign({},l),{sugiNodeSize:h,nodeSize:null}))}else return t.sugiNodeSize}return e.sugiNodeSize=a,e}function ii(t){return[+(t!==void 0),1]}function Fa(...t){if(t.length)throw new Error(`got arguments to sugiyama(${t}), but constructor takes no aruguments.`);return ht({layering:Oa(),decross:Pa(),coord:ka(),size:null,nodeSize:ii,sugiNodeSize:Di(ii)})}xt(ea());var Da=xt(Ee());function _e(t){function e(n){let s=n.reduce((m,g)=>m+g.length*Math.max(g.length-1,0)/2,0),o=n.reduce((m,g)=>m+g.reduce((w,I)=>w+I.ichildren().length,0),0);if(t.large!=="large"&&s>1200)throw new Error('size of dag to decrossOpt is too large and will likely crash instead of complete, enable "large" grahps to run anyway');if(t.large!=="large"&&t.large!=="medium"&&(s>400||o>100))throw new Error('size of dag to decrossOpt is too large and will likely not complete, enable "medium" grahps to run anyway');let a=[];for(let[m,g]of dt(n)){let w=new Set(m.flatMap(C=>C.children())),I=g.filter(C=>!w.has(C)),_=m.map(C=>C.children()).filter(C=>C.length>1);a.push([I,_]);let S=m.filter(C=>!C.ichildren().length),M=new Map;for(let C of m)for(let $ of C.ichildren()){let k=M.get($);k?k.push(C):M.set($,[C])}let O=[...M.values()];a.push([S,O])}let h=a.reduce((m,[g,w])=>w.reduce((I,_)=>I+_.length*_.length,0)*g.length,0)/4,l=1/(h+1),u=l/(s+1),f={optimize:"opt",opType:"min",constraints:{},variables:{},ints:{}},c=new Map;{let m=0;for(let g of n)for(let w of g)c.set(w,m++)}function d(...m){return m.map(g=>N(c.get(g))).sort((g,w)=>g-w).join(" => ")}function y(m){for(let[g,w]of m.slice(0,m.length-1).entries())for(let I of m.slice(g+1)){let _=d(w,I);f.ints[_]=1,f.constraints[_]={max:1},f.variables[_]={opt:-u,[_]:1}}for(let[g,w]of m.slice(0,m.length-1).entries())for(let[I,_]of m.slice(g+1).entries())for(let S of m.slice(g+I+2)){let M=d(w,_),O=d(w,S),C=d(_,S),$=d(w,_,S),k=$+"+";f.constraints[k]={max:1},f.variables[M][k]=1,f.variables[O][k]=-1,f.variables[C][k]=1;let B=$+"-";f.constraints[B]={min:0},f.variables[M][B]=1,f.variables[O][B]=-1,f.variables[C][B]=1}}function v(m){for(let[g,w]of m.slice(0,m.length-1).entries())for(let I of m.slice(g+1)){let _=d(w,I);for(let S of w.ichildren())for(let M of I.ichildren()){if(S===M)continue;let O=d(S,M),C=`slack (${_}) (${O})`,$=`${C} +`,k=`${C} -`;f.variables[C]={opt:1,[$]:1,[k]:1};let B=Math.sign(N(c.get(S))-N(c.get(M))),T=Math.max(B,0);f.constraints[$]={min:T},f.variables[_][$]=1,f.variables[O][$]=B,f.constraints[k]={min:-T},f.variables[_][k]=-1,f.variables[O][k]=-B}}}function b(m,g){for(let w of m)for(let I of g)for(let[_,S]of I.entries())for(let M of I.slice(_+1)){let O=`dist ${[S,w,M].map(B=>N(c.get(B))).join(" => ")}`,C=`${O} normal`,$=`${O} reversed`;f.variables[O]={opt:l,[C]:1,[$]:1};let k=0;for(let[B,T]of[[S,w],[S,M],[w,M]]){let F=d(B,T),V=Math.sign(N(c.get(B))-N(c.get(T)));k+=+(V>0),f.variables[F][C]=-V,f.variables[F][$]=V}f.constraints[C]={min:1-k},f.constraints[$]={min:k-2}}}for(let m of n)y(m);for(let m of n.slice(0,n.length-1))v(m);if(t.dist)for(let[m,g]of a)b(m,g);let x=Da.Solve.call({},f);for(let m of n)m.sort((g,w)=>x[d(g,w)]||-1)}function r(n){return n===void 0?t.large:_e(Object.assign(Object.assign({},t),{large:n}))}e.large=r;function i(n){return n===void 0?t.dist:_e(Object.assign(Object.assign({},t),{dist:n}))}return e.dist=i,e}function qa(...t){if(t.length)throw new Error(`got arguments to opt(${t}), but constructor takes no aruguments.`);return _e({large:"small",dist:!1})}xt(Ee());(async()=>{const t=await Xi("test(10)").then(f=>f.data),e=new Map([["a","#FFC000"],["b","#7030A0"],["c","#92D050"],["d","#00B0F0"]]),r=30,i=pa()(t.scm_test);console.log(i);const n=Fa().decross(qa()).nodeSize(f=>[(f?5:.25)*r,5*r]),s=n(i).width,o=n(i).height,a=An("#svg01");a.attr("viewBox",[20,0,s,o].join(" "));const h=a.append("defs"),l=Mo().curve(ko).x(f=>f.x).y(f=>f.y);a.append("g").selectAll("path").data(i.links()).enter().append("path").attr("d",({points:f})=>l(f)).attr("fill","none").attr("stroke-width",3).attr("stroke",({source:f,target:c})=>{const d=encodeURIComponent(`${f.data.id}--${c.data.id}`),y=h.append("linearGradient").attr("id",d).attr("gradientUnits","userSpaceOnUse").attr("x1",f.x).attr("x2",c.x).attr("y1",f.y).attr("y2",c.y);return y.append("stop").attr("offset","0%").attr("stop-color",e.get(f.data.type)),y.append("stop").attr("offset","100%").attr("stop-color",e.get(c.data.type)),`url(#${d})`});const u=a.append("g").selectAll("g").data(i.descendants()).enter().append("g").attr("transform",({x:f,y:c})=>`translate(${f}, ${c})`);u.append("circle").attr("r",r).attr("fill",f=>e.get(f.data.type)),u.append("text").text(f=>f.data.name).attr("font-weight","normal").attr("font-family","sans-serif").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","#767171").attr("transform","translate(0,40)")})();const La={},Ha=t=>(Zi("data-v-d8be95f0"),t=t(),Ji(),t),Ua={class:"container"},Xa=Ha(()=>Qt("div",{class:"sugiyama-chart-box"},[Qt("div",{class:"content-title"},"\u5168\u6D41\u7A0B"),Qt("svg",{class:"sugiyama-svg",id:"svg01"})],-1)),Ya=[Xa];function Wa(t,e,r,i,n,s){return Wi(),Gi("div",Ua,Ya)}const Ka=Yi(La,[["render",Wa],["__scopeId","data-v-d8be95f0"]]);export{Ka as default};
